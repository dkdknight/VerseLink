{"ast":null,"code":"import _objectSpread from\"C:/Users/Knight-Server/Desktop/VerseLink-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{toast}from'react-hot-toast';import{api}from'../services/authService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateEventPage=()=>{const{id}=useParams();const navigate=useNavigate();const[formData,setFormData]=useState({title:'',description:'',type:'autre',start_at_utc:'',duration_minutes:60,location:'',max_participants:''});const[loading,setLoading]=useState(false);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{setLoading(true);const payload=_objectSpread(_objectSpread({},formData),{},{duration_minutes:parseInt(formData.duration_minutes,10),max_participants:formData.max_participants?parseInt(formData.max_participants,10):null,start_at_utc:new Date(formData.start_at_utc).toISOString()});await api.post(\"/organizations/\".concat(id,\"/events\"),payload);toast.success('Événement créé');navigate('/events');}catch(error){var _error$response,_error$response$data;console.error('Failed to create event:',error);const message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||\"Erreur lors de la création de l'événement\";toast.error(message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-800 rounded-lg p-6 border border-dark-700\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Cr\\xE9er un \\xE9v\\xE9nement\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Titre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,className:\"input-primary w-full\",rows:\"3\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:formData.type,onChange:handleChange,className:\"input-primary w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"raid\",children:\"Raid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"course\",children:\"Course\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pvp\",children:\"PvP\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fps\",children:\"FPS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"salvaging\",children:\"Salvaging\"}),/*#__PURE__*/_jsx(\"option\",{value:\"logistique\",children:\"Logistique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"exploration\",children:\"Exploration\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mining\",children:\"Mining\"}),/*#__PURE__*/_jsx(\"option\",{value:\"trading\",children:\"Trading\"}),/*#__PURE__*/_jsx(\"option\",{value:\"roleplay\",children:\"Roleplay\"}),/*#__PURE__*/_jsx(\"option\",{value:\"autre\",children:\"Autre\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"D\\xE9but\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",name:\"start_at_utc\",value:formData.start_at_utc,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Dur\\xE9e (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"duration_minutes\",value:formData.duration_minutes,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Lieu\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:formData.location,onChange:handleChange,className:\"input-primary w-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Participants max\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"max_participants\",value:formData.max_participants,onChange:handleChange,className:\"input-primary w-full\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-primary\",children:loading?'Création...':'Créer'})})]})]})})});};export default CreateEventPage;","map":{"version":3,"names":["React","useState","useNavigate","useParams","toast","api","jsx","_jsx","jsxs","_jsxs","CreateEventPage","id","navigate","formData","setFormData","title","description","type","start_at_utc","duration_minutes","location","max_participants","loading","setLoading","handleChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","payload","parseInt","Date","toISOString","post","concat","success","error","_error$response","_error$response$data","console","message","response","data","detail","className","children","onSubmit","onChange","required","rows","disabled"],"sources":["C:/Users/Knight-Server/Desktop/VerseLink-main/frontend/src/pages/CreateEventPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { toast } from 'react-hot-toast';\r\nimport { api } from '../services/authService';\r\n\r\nconst CreateEventPage = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    type: 'autre',\r\n    start_at_utc: '',\r\n    duration_minutes: 60,\r\n    location: '',\r\n    max_participants: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setLoading(true);\r\n      const payload = {\r\n        ...formData,\r\n        duration_minutes: parseInt(formData.duration_minutes, 10),\r\n        max_participants: formData.max_participants ? parseInt(formData.max_participants, 10) : null,\r\n        start_at_utc: new Date(formData.start_at_utc).toISOString()\r\n      };\r\n      await api.post(`/organizations/${id}/events`, payload);\r\n      toast.success('Événement créé');\r\n      navigate('/events');\r\n    } catch (error) {\r\n      console.error('Failed to create event:', error);\r\n      const message = error.response?.data?.detail || \"Erreur lors de la création de l'événement\";\r\n      toast.error(message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-dark-950 py-8\">\r\n      <div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"bg-dark-800 rounded-lg p-6 border border-dark-700\">\r\n          <h1 className=\"text-2xl font-bold text-white mb-6\">Créer un événement</h1>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-gray-300 mb-1\">Titre</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"title\"\r\n                value={formData.title}\r\n                onChange={handleChange}\r\n                className=\"input-primary w-full\"\r\n                required\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-300 mb-1\">Description</label>\r\n              <textarea\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleChange}\r\n                className=\"input-primary w-full\"\r\n                rows=\"3\"\r\n                required\r\n              ></textarea>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-300 mb-1\">Type</label>\r\n              <select\r\n                name=\"type\"\r\n                value={formData.type}\r\n                onChange={handleChange}\r\n                className=\"input-primary w-full\"\r\n              >\r\n                <option value=\"raid\">Raid</option>\r\n                <option value=\"course\">Course</option>\r\n                <option value=\"pvp\">PvP</option>\r\n                <option value=\"fps\">FPS</option>\r\n                <option value=\"salvaging\">Salvaging</option>\r\n                <option value=\"logistique\">Logistique</option>\r\n                <option value=\"exploration\">Exploration</option>\r\n                <option value=\"mining\">Mining</option>\r\n                <option value=\"trading\">Trading</option>\r\n                <option value=\"roleplay\">Roleplay</option>\r\n                <option value=\"autre\">Autre</option>\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-300 mb-1\">Début</label>\r\n              <input\r\n                type=\"datetime-local\"\r\n                name=\"start_at_utc\"\r\n                value={formData.start_at_utc}\r\n                onChange={handleChange}\r\n                className=\"input-primary w-full\"\r\n                required\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-300 mb-1\">Durée (minutes)</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"duration_minutes\"\r\n                value={formData.duration_minutes}\r\n                onChange={handleChange}\r\n                className=\"input-primary w-full\"\r\n                required\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-300 mb-1\">Lieu</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"location\"\r\n                value={formData.location}\r\n                onChange={handleChange}\r\n                className=\"input-primary w-full\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-300 mb-1\">Participants max</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"max_participants\"\r\n                value={formData.max_participants}\r\n                onChange={handleChange}\r\n                className=\"input-primary w-full\"\r\n              />\r\n            </div>\r\n            <div className=\"flex justify-end\">\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"btn-primary\"\r\n              >\r\n                {loading ? 'Création...' : 'Créer'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateEventPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}