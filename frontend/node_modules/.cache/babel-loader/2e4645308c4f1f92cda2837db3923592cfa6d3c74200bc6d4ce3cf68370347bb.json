{"ast":null,"code":"import _objectSpread from\"C:/Users/Knight-Server/Desktop/VerseLink-Xapollo/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{toast}from'react-hot-toast';import{tournamentService}from'../services/tournamentService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateTournamentPage=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({org_id:'',name:'',description:'',format:'se',start_at_utc:'',max_teams:8,team_size:5,prize_pool:'',banner_url:''});const[loading,setLoading]=useState(false);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{setLoading(true);const startUtc=new Date(formData.start_at_utc).toISOString();const payload={name:formData.name,description:formData.description,format:formData.format,start_at_utc:startUtc,max_teams:parseInt(formData.max_teams,10),team_size:parseInt(formData.team_size,10),prize_pool:formData.prize_pool||null,banner_url:formData.banner_url||null};await tournamentService.createTournament(formData.org_id,payload);toast.success('Tournoi créé');navigate('/tournaments');}catch(error){var _error$response,_error$response$data;console.error('Failed to create tournament:',error);const message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||\"Erreur lors de la création du tournoi\";toast.error(message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-800 rounded-lg p-6 border border-dark-700\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Cr\\xE9er un tournoi\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"ID de l'organisation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"org_id\",value:formData.org_id,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,className:\"input-primary w-full\",rows:\"3\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Format\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"format\",value:formData.format,onChange:handleChange,className:\"input-primary w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"se\",children:\"Simple \\xC9limination\"}),/*#__PURE__*/_jsx(\"option\",{value:\"de\",children:\"Double \\xC9limination\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rr\",children:\"Round Robin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"swiss\",children:\"Syst\\xE8me Suisse\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"D\\xE9but\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",name:\"start_at_utc\",value:formData.start_at_utc,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Nombre maximum d'\\xE9quipes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"max_teams\",value:formData.max_teams,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Taille des \\xE9quipes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"team_size\",value:formData.team_size,onChange:handleChange,className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"R\\xE9compense (facultatif)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prize_pool\",value:formData.prize_pool,onChange:handleChange,className:\"input-primary w-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 mb-1\",children:\"Banni\\xE8re (URL facultative)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"banner_url\",value:formData.banner_url,onChange:handleChange,className:\"input-primary w-full\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary w-full\",disabled:loading,children:loading?'Création...':'Créer le tournoi'})]})]})})});};export default CreateTournamentPage;","map":{"version":3,"names":["React","useState","useNavigate","toast","tournamentService","jsx","_jsx","jsxs","_jsxs","CreateTournamentPage","navigate","formData","setFormData","org_id","name","description","format","start_at_utc","max_teams","team_size","prize_pool","banner_url","loading","setLoading","handleChange","e","value","target","prev","_objectSpread","handleSubmit","preventDefault","startUtc","Date","toISOString","payload","parseInt","createTournament","success","error","_error$response","_error$response$data","console","message","response","data","detail","className","children","onSubmit","type","onChange","required","rows","disabled"],"sources":["C:/Users/Knight-Server/Desktop/VerseLink-Xapollo/frontend/src/pages/CreateTournamentPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { tournamentService } from '../services/tournamentService';\n\nconst CreateTournamentPage = () => {\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    org_id: '',\n    name: '',\n    description: '',\n    format: 'se',\n    start_at_utc: '',\n    max_teams: 8,\n    team_size: 5,\n    prize_pool: '',\n    banner_url: ''\n  });\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n      const startUtc = new Date(formData.start_at_utc).toISOString();\n      const payload = {\n        name: formData.name,\n        description: formData.description,\n        format: formData.format,\n        start_at_utc: startUtc,\n        max_teams: parseInt(formData.max_teams, 10),\n        team_size: parseInt(formData.team_size, 10),\n        prize_pool: formData.prize_pool || null,\n        banner_url: formData.banner_url || null\n      };\n      await tournamentService.createTournament(formData.org_id, payload);\n      toast.success('Tournoi créé');\n      navigate('/tournaments');\n    } catch (error) {\n      console.error('Failed to create tournament:', error);\n      const message = error.response?.data?.detail || \"Erreur lors de la création du tournoi\";\n      toast.error(message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-dark-950 py-8\">\n      <div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"bg-dark-800 rounded-lg p-6 border border-dark-700\">\n          <h1 className=\"text-2xl font-bold text-white mb-6\">Créer un tournoi</h1>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-gray-300 mb-1\">ID de l'organisation</label>\n              <input\n                type=\"text\"\n                name=\"org_id\"\n                value={formData.org_id}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Nom</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Description</label>\n              <textarea\n                name=\"description\"\n                value={formData.description}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n                rows=\"3\"\n                required\n              ></textarea>\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Format</label>\n              <select\n                name=\"format\"\n                value={formData.format}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n              >\n                <option value=\"se\">Simple Élimination</option>\n                <option value=\"de\">Double Élimination</option>\n                <option value=\"rr\">Round Robin</option>\n                <option value=\"swiss\">Système Suisse</option>\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Début</label>\n              <input\n                type=\"datetime-local\"\n                name=\"start_at_utc\"\n                value={formData.start_at_utc}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Nombre maximum d'équipes</label>\n              <input\n                type=\"number\"\n                name=\"max_teams\"\n                value={formData.max_teams}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Taille des équipes</label>\n              <input\n                type=\"number\"\n                name=\"team_size\"\n                value={formData.team_size}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Récompense (facultatif)</label>\n              <input\n                type=\"text\"\n                name=\"prize_pool\"\n                value={formData.prize_pool}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Bannière (URL facultative)</label>\n              <input\n                type=\"text\"\n                name=\"banner_url\"\n                value={formData.banner_url}\n                onChange={handleChange}\n                className=\"input-primary w-full\"\n              />\n            </div>\n            <button\n              type=\"submit\"\n              className=\"btn-primary w-full\"\n              disabled={loading}\n            >\n              {loading ? 'Création...' : 'Créer le tournoi'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateTournamentPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}