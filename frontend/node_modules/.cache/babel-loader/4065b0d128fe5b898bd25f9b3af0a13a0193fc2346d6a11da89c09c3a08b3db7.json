{"ast":null,"code":"import{api}from'./authService';export const chatService={getMessages:async(type,id)=>{const token=localStorage.getItem('auth_token');const response=await api.get(\"/chat/\".concat(type,\"/\").concat(id,\"/messages\"),{headers:token?{Authorization:\"Bearer \".concat(token)}:{}});return response.data;},postMessage:async(type,id,content)=>{const token=localStorage.getItem('auth_token');const response=await api.post(\"/chat/\".concat(type,\"/\").concat(id,\"/messages\"),{content},{headers:token?{Authorization:\"Bearer \".concat(token)}:{}});return response.data;},connectWebSocket:(type,id,token,onMessage)=>{const httpBase=process.env.REACT_APP_BACKEND_URL||'http://localhost:8001';const base=(process.env.REACT_APP_BACKEND_WS_URL||httpBase).replace(/^http/,'ws');const ws=new WebSocket(\"\".concat(base,\"/api/v1/chat/ws/\").concat(type==='events'?'event':'match',\"/\").concat(id,\"?token=\").concat(token));ws.onmessage=e=>{try{onMessage(JSON.parse(e.data));}catch(_unused){}};ws.onopen=()=>{ws._pingInterval=setInterval(()=>{if(ws.readyState===WebSocket.OPEN){ws.send('ping');}},30000);};ws.onclose=()=>{if(ws._pingInterval)clearInterval(ws._pingInterval);};return ws;}};","map":{"version":3,"names":["api","chatService","getMessages","type","id","token","localStorage","getItem","response","get","concat","headers","Authorization","data","postMessage","content","post","connectWebSocket","onMessage","httpBase","process","env","REACT_APP_BACKEND_URL","base","REACT_APP_BACKEND_WS_URL","replace","ws","WebSocket","onmessage","e","JSON","parse","_unused","onopen","_pingInterval","setInterval","readyState","OPEN","send","onclose","clearInterval"],"sources":["C:/Users/Knight-Server/Desktop/VerseLink-conflict_090925_1049/frontend/src/services/chatService.js"],"sourcesContent":["import { api } from './authService';\r\n\r\nexport const chatService = {\r\n  getMessages: async (type, id) => {\r\n    const token = localStorage.getItem('auth_token');\r\n    const response = await api.get(`/chat/${type}/${id}/messages`, {\r\n      headers: token ? { Authorization: `Bearer ${token}` } : {}\r\n    });\r\n    return response.data;\r\n  },\r\n  postMessage: async (type, id, content) => {\r\n    const token = localStorage.getItem('auth_token');\r\n    const response = await api.post(\r\n      `/chat/${type}/${id}/messages`,\r\n      { content },\r\n      {\r\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\r\n      }\r\n    );\r\n    return response.data;\r\n  },\r\n  connectWebSocket: (type, id, token, onMessage) => {\r\n    const httpBase = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001';\r\n    const base = (process.env.REACT_APP_BACKEND_WS_URL || httpBase).replace(/^http/, 'ws');\r\n    const ws = new WebSocket(`${base}/api/v1/chat/ws/${type === 'events' ? 'event' : 'match'}/${id}?token=${token}`);\r\n    ws.onmessage = (e) => {\r\n      try {\r\n        onMessage(JSON.parse(e.data));\r\n      } catch {}\r\n    };\r\n    ws.onopen = () => {\r\n      ws._pingInterval = setInterval(() => {\r\n        if (ws.readyState === WebSocket.OPEN) {\r\n          ws.send('ping');\r\n        }\r\n      }, 30000);\r\n    };\r\n    ws.onclose = () => {\r\n      if (ws._pingInterval) clearInterval(ws._pingInterval);\r\n    };\r\n    return ws;\r\n  }\r\n};"],"mappings":"AAAA,OAASA,GAAG,KAAQ,eAAe,CAEnC,MAAO,MAAM,CAAAC,WAAW,CAAG,CACzBC,WAAW,CAAE,KAAAA,CAAOC,IAAI,CAAEC,EAAE,GAAK,CAC/B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAChD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAR,GAAG,CAACS,GAAG,UAAAC,MAAA,CAAUP,IAAI,MAAAO,MAAA,CAAIN,EAAE,cAAa,CAC7DO,OAAO,CAAEN,KAAK,CAAG,CAAEO,aAAa,WAAAF,MAAA,CAAYL,KAAK,CAAG,CAAC,CAAG,CAAC,CAC3D,CAAC,CAAC,CACF,MAAO,CAAAG,QAAQ,CAACK,IAAI,CACtB,CAAC,CACDC,WAAW,CAAE,KAAAA,CAAOX,IAAI,CAAEC,EAAE,CAAEW,OAAO,GAAK,CACxC,KAAM,CAAAV,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAChD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAR,GAAG,CAACgB,IAAI,UAAAN,MAAA,CACpBP,IAAI,MAAAO,MAAA,CAAIN,EAAE,cACnB,CAAEW,OAAQ,CAAC,CACX,CACEJ,OAAO,CAAEN,KAAK,CAAG,CAAEO,aAAa,WAAAF,MAAA,CAAYL,KAAK,CAAG,CAAC,CAAG,CAAC,CAC3D,CACF,CAAC,CACD,MAAO,CAAAG,QAAQ,CAACK,IAAI,CACtB,CAAC,CACDI,gBAAgB,CAAEA,CAACd,IAAI,CAAEC,EAAE,CAAEC,KAAK,CAAEa,SAAS,GAAK,CAChD,KAAM,CAAAC,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,EAAI,uBAAuB,CAC7E,KAAM,CAAAC,IAAI,CAAG,CAACH,OAAO,CAACC,GAAG,CAACG,wBAAwB,EAAIL,QAAQ,EAAEM,OAAO,CAAC,OAAO,CAAE,IAAI,CAAC,CACtF,KAAM,CAAAC,EAAE,CAAG,GAAI,CAAAC,SAAS,IAAAjB,MAAA,CAAIa,IAAI,qBAAAb,MAAA,CAAmBP,IAAI,GAAK,QAAQ,CAAG,OAAO,CAAG,OAAO,MAAAO,MAAA,CAAIN,EAAE,YAAAM,MAAA,CAAUL,KAAK,CAAE,CAAC,CAChHqB,EAAE,CAACE,SAAS,CAAIC,CAAC,EAAK,CACpB,GAAI,CACFX,SAAS,CAACY,IAAI,CAACC,KAAK,CAACF,CAAC,CAAChB,IAAI,CAAC,CAAC,CAC/B,CAAE,MAAAmB,OAAA,CAAM,CAAC,CACX,CAAC,CACDN,EAAE,CAACO,MAAM,CAAG,IAAM,CAChBP,EAAE,CAACQ,aAAa,CAAGC,WAAW,CAAC,IAAM,CACnC,GAAIT,EAAE,CAACU,UAAU,GAAKT,SAAS,CAACU,IAAI,CAAE,CACpCX,EAAE,CAACY,IAAI,CAAC,MAAM,CAAC,CACjB,CACF,CAAC,CAAE,KAAK,CAAC,CACX,CAAC,CACDZ,EAAE,CAACa,OAAO,CAAG,IAAM,CACjB,GAAIb,EAAE,CAACQ,aAAa,CAAEM,aAAa,CAACd,EAAE,CAACQ,aAAa,CAAC,CACvD,CAAC,CACD,MAAO,CAAAR,EAAE,CACX,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}