{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams,Link}from'react-router-dom';import{toast}from'react-hot-toast';import{TrophyIcon,CalendarDaysIcon,UsersIcon,TagIcon,PlusIcon,DocumentArrowUpIcon,CheckCircleIcon,ClockIcon,PlayIcon,StarIcon,CogIcon,LockClosedIcon,LockOpenIcon,MagnifyingGlassIcon}from'@heroicons/react/24/outline';import{tournamentService}from'../services/tournamentService';import{useAuth}from'../App';import MatchReportModal from'../components/MatchReportModal';import TournamentBracket from'../components/TournamentBracket';import MatchDisputeModal from'../components/MatchDisputeModal';import MatchConfirmModal from'../components/MatchConfirmModal';import Chat from'../components/Chat';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TournamentDetailPage=()=>{const{id}=useParams();const[tournament,setTournament]=useState(null);const[loading,setLoading]=useState(true);const[actionLoading,setActionLoading]=useState(false);const[activeTab,setActiveTab]=useState('bracket');const[reportModalOpen,setReportModalOpen]=useState(false);const[selectedMatch,setSelectedMatch]=useState(null);const[disputeModalOpen,setDisputeModalOpen]=useState(false);const[confirmModalOpen,setConfirmModalOpen]=useState(false);const{user,isAuthenticated}=useAuth();useEffect(()=>{if(id){loadTournament();}},[id]);const loadTournament=async()=>{try{setLoading(true);const tournamentData=await tournamentService.getTournament(id);setTournament(tournamentData);}catch(error){console.error('Failed to load tournament:',error);toast.error('Tournoi non trouvé');}finally{setLoading(false);}};const handleCreateTeam=async teamName=>{if(!isAuthenticated){toast.error('Vous devez être connecté pour créer une équipe');return;}try{setActionLoading(true);await tournamentService.createTeam(tournament.id,{name:teamName});toast.success('Équipe créée avec succès !');await loadTournament();}catch(error){var _error$response,_error$response$data;if((_error$response=error.response)!==null&&_error$response!==void 0&&(_error$response$data=_error$response.data)!==null&&_error$response$data!==void 0&&_error$response$data.detail){toast.error(error.response.data.detail);}else{toast.error(\"Erreur lors de la création de l'équipe\");}}finally{setActionLoading(false);}};const handleJoinTeam=async teamId=>{if(!isAuthenticated||!user){toast.error('Vous devez être connecté pour rejoindre une équipe');return;}try{setActionLoading(true);await tournamentService.addTeamMember(tournament.id,teamId,user.id);toast.success(\"Vous avez rejoint l'équipe !\");await loadTournament();}catch(error){var _error$response2,_error$response2$data;if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.detail){toast.error(error.response.data.detail);}else{toast.error(\"Erreur lors de l'adhésion à l'équipe\");}}finally{setActionLoading(false);}};const handleMatchClick=match=>{setSelectedMatch(match);if(match.state==='pending'&&canReportScore(match)){setReportModalOpen(true);}else if(match.state==='reported'&&isMatchCaptain(match)&&match.reported_by!==(user===null||user===void 0?void 0:user.id)){setConfirmModalOpen(true);}else if(canDispute(match)){setDisputeModalOpen(true);}};const canReportScore=match=>{if(!isAuthenticated||!user)return false;// Check if user is capitaine d'une des équipes\nreturn match.can_report||match.team_a_captain_id===user.id||match.team_b_captain_id===user.id;};const canDispute=match=>{if(!isAuthenticated||!user)return false;return['reported','verified'].includes(match.state)&&(match.team_a_captain_id===user.id||match.team_b_captain_id===user.id);};const canScheduleMatch=match=>{if(!isAuthenticated||!user)return false;return match.state==='pending'&&!match.scheduled_at&&(match.team_a_captain_id===user.id||match.team_b_captain_id===user.id)&&(!match.pending_scheduled_at||match.schedule_confirmations.includes(user.id));};const isMatchCaptain=match=>{return isAuthenticated&&user&&(match.team_a_captain_id===user.id||match.team_b_captain_id===user.id);};const canVerifyMatch=match=>{if(!isAuthenticated||!user)return false;return match.state==='reported'&&match.can_verify;};const canForfeitMatch=match=>{if(!isAuthenticated||!user)return false;return match.state==='pending'&&match.can_verify;};const canUploadAttachment=match=>{if(!isAuthenticated||!user)return false;return canReportScore(match)||match.can_verify;};const handleScheduleMatch=async match=>{const input=prompt('Date et heure du match (YYYY-MM-DD HH:MM)');if(!input)return;const scheduledAt=new Date(input);if(isNaN(scheduledAt)){toast.error('Date invalide');return;}try{setActionLoading(true);const res=await tournamentService.scheduleMatch(match.id,scheduledAt.toISOString());toast.success(res.message||'Match programmé');await loadTournament();}catch(error){var _error$response3,_error$response3$data;if((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.detail){toast.error(error.response.data.detail);}else{toast.error('Erreur lors de la programmation du match');}}finally{setActionLoading(false);}};const handleAcceptSchedule=async match=>{try{setActionLoading(true);const res=await tournamentService.scheduleMatch(match.id,match.pending_scheduled_at);toast.success(res.message||'Match programmé');await loadTournament();}catch(error){var _error$response4,_error$response4$data;if((_error$response4=error.response)!==null&&_error$response4!==void 0&&(_error$response4$data=_error$response4.data)!==null&&_error$response4$data!==void 0&&_error$response4$data.detail){toast.error(error.response.data.detail);}else{toast.error(\"Erreur lors de l'acceptation de la date\");}}finally{setActionLoading(false);}};const handleDeclineSchedule=async match=>{try{setActionLoading(true);await tournamentService.declineMatchSchedule(match.id);toast.info('Proposition refusée');}catch(error){var _error$response5,_error$response5$data;if((_error$response5=error.response)!==null&&_error$response5!==void 0&&(_error$response5$data=_error$response5.data)!==null&&_error$response5$data!==void 0&&_error$response5$data.detail){toast.error(error.response.data.detail);}else{toast.error(\"Erreur lors du refus de la date\");}}finally{setActionLoading(false);}handleScheduleMatch(match);};const handleVerifyMatch=async match=>{try{setActionLoading(true);await tournamentService.verifyMatchResult(match.id);toast.success('Match vérifié');await loadTournament();}catch(error){var _error$response6,_error$response6$data;if((_error$response6=error.response)!==null&&_error$response6!==void 0&&(_error$response6$data=_error$response6.data)!==null&&_error$response6$data!==void 0&&_error$response6$data.detail){toast.error(error.response.data.detail);}else{toast.error('Erreur lors de la vérification du match');}}finally{setActionLoading(false);}};const handleForfeitMatch=async match=>{const choice=prompt(\"Quelle \\xE9quipe gagne par forfait ?\\nA: \".concat(match.team_a_name,\"\\nB: \").concat(match.team_b_name));if(!choice)return;const winnerTeamId=choice.toLowerCase().startsWith('b')?match.team_b_id:match.team_a_id;try{setActionLoading(true);await tournamentService.forfeitMatch(match.id,winnerTeamId);toast.success('Match terminé par forfait');await loadTournament();}catch(error){var _error$response7,_error$response7$data;if((_error$response7=error.response)!==null&&_error$response7!==void 0&&(_error$response7$data=_error$response7.data)!==null&&_error$response7$data!==void 0&&_error$response7$data.detail){toast.error(error.response.data.detail);}else{toast.error('Erreur lors du forfait du match');}}finally{setActionLoading(false);}};const formatTournamentFormat=format=>{const formats={se:'Simple Élimination',de:'Double Élimination',rr:'Round Robin',swiss:'Système Suisse'};return formats[format]||format;};const formatTournamentState=state=>{const states={draft:'Brouillon',open_registration:'Inscriptions ouvertes',registration_closed:'Inscriptions fermées',ongoing:'En cours',finished:'Terminé',cancelled:'Annulé'};return states[state]||state;};const getStateColor=state=>{const colors={draft:'bg-gray-600',open_registration:'bg-green-600',registration_closed:'bg-yellow-600',ongoing:'bg-blue-600',finished:'bg-purple-600',cancelled:'bg-red-600'};return colors[state]||'bg-gray-600';};const TeamCard=_ref=>{let{team}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-white font-semibold text-lg flex items-center\",children:[team.seed&&/*#__PURE__*/_jsx(\"span\",{className:\"bg-primary-600 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center mr-2\",children:team.seed}),team.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 text-sm\",children:[\"Capitaine: \",team.captain_handle]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-300\",children:[team.member_count,\"/\",tournament.team_size,\" membres\"]}),tournament.format==='rr'&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400\",children:[team.wins,\"V - \",team.losses,\"D (\",team.points,\" pts)\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[team.members.slice(0,3).map(member=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-300\",children:[member.avatar_url?/*#__PURE__*/_jsx(\"img\",{src:member.avatar_url,alt:member.handle,className:\"w-4 h-4 rounded-full mr-2\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-dark-600 rounded-full mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:member.handle}),member.is_captain&&/*#__PURE__*/_jsx(StarIcon,{className:\"w-3 h-3 text-yellow-400 ml-1\"})]},member.user_id)),team.members.length>3&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"+\",team.members.length-3,\" autres membres\"]})]}),tournament.can_register&&isAuthenticated&&!tournament.my_team&&team.member_count<tournament.team_size&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleJoinTeam(team.id),disabled:actionLoading,className:\"text-sm text-primary-400 hover:text-primary-300 font-medium\",children:\"Rejoindre l'\\xE9quipe \\u2192\"})}),tournament.my_team&&tournament.my_team.id===team.id&&tournament.my_team.can_manage&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/tournaments/\".concat(tournament.id,\"/teams/\").concat(team.id,\"/manage\"),className:\"text-sm text-primary-400 hover:text-primary-300 font-medium\",children:\"G\\xE9rer l'\\xE9quipe \\u2192\"})})]});};const MatchCard=_ref2=>{let{match}=_ref2;const fileInputRef=useRef(null);const handleFileChange=async e=>{const file=e.target.files[0];if(!file)return;const description=prompt('Description de la preuve (optionnel)')||'';try{await tournamentService.uploadMatchAttachment(match.id,file,description);toast.success('Preuve envoyée');await loadTournament();}catch(error){var _error$response8,_error$response8$data;if((_error$response8=error.response)!==null&&_error$response8!==void 0&&(_error$response8$data=_error$response8.data)!==null&&_error$response8$data!==void 0&&_error$response8$data.detail){toast.error(error.response.data.detail);}else{toast.error(\"Erreur lors de l'envoi de la preuve\");}}finally{e.target.value='';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-dark-600 text-gray-300 px-2 py-1 rounded\",children:[\"Round \",match.round]}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs px-2 py-1 rounded text-white \".concat(match.state==='verified'?'bg-green-600':match.state==='reported'?'bg-yellow-600':match.state==='live'?'bg-blue-600':'bg-gray-600'),children:match.state==='verified'?'Terminé':match.state==='reported'?'Reporté':match.state==='live'?'En cours':'À venir'})]}),match.scheduled_at&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:new Date(match.scheduled_at).toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',hour:'2-digit',minute:'2-digit'})}),match.pending_scheduled_at&&!match.scheduled_at&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-yellow-400\",children:[new Date(match.pending_scheduled_at).toLocaleString('fr-FR',{day:'2-digit',month:'2-digit',hour:'2-digit',minute:'2-digit'}),isMatchCaptain(match)&&!match.schedule_confirmations.includes(user.id)?/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAcceptSchedule(match),disabled:actionLoading,className:\"px-2 py-1 bg-green-600 text-white rounded text-xs\",children:\"Accepter\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeclineSchedule(match),disabled:actionLoading,className:\"px-2 py-1 bg-red-600 text-white rounded text-xs\",children:\"Refuser\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:\"(en attente de confirmation)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium \".concat(match.winner_team_id===match.team_a_id?'text-green-400':''),children:match.team_a_name||'TBD'}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium \".concat(match.winner_team_id===match.team_b_id?'text-green-400':''),children:match.team_b_name||'TBD'})]}),match.score_a!==null&&match.score_b!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold \".concat(match.winner_team_id===match.team_a_id?'text-green-400':'text-gray-400'),children:match.score_a}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold \".concat(match.winner_team_id===match.team_b_id?'text-green-400':'text-gray-400'),children:match.score_b})]})]}),match.notes&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs text-gray-400 italic\",children:match.notes}),match.attachments&&match.attachments.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs space-y-1\",children:match.attachments.map(att=>/*#__PURE__*/_jsx(\"a\",{href:tournamentService.downloadAttachment(att.id),target:\"_blank\",rel:\"noopener noreferrer\",className:\"block text-primary-400 hover:text-primary-300\",children:att.description||att.filename},att.id))}),(canScheduleMatch(match)||canReportScore(match)&&match.state==='pending'||canVerifyMatch(match)||canForfeitMatch(match)||canUploadAttachment(match))&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-center space-y-2\",children:[canScheduleMatch(match)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleScheduleMatch(match),disabled:actionLoading,className:\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\",children:\"Programmer le match \\u2192\"}),canReportScore(match)&&match.state==='pending'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMatchClick(match),className:\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\",children:\"Reporter le score \\u2192\"}),canVerifyMatch(match)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVerifyMatch(match),disabled:actionLoading,className:\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\",children:\"V\\xE9rifier le match \\u2192\"}),canForfeitMatch(match)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleForfeitMatch(match),disabled:actionLoading,className:\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\",children:\"Forfait du match \\u2192\"}),canUploadAttachment(match)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleFileChange,className:\"hidden\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>fileInputRef.current&&fileInputRef.current.click(),className:\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full flex items-center justify-center\",children:[/*#__PURE__*/_jsx(DocumentArrowUpIcon,{className:\"w-4 h-4 mr-1\"}),\" Envoyer une preuve \\u2192\"]})]})]}),isMatchCaptain(match)&&match.state==='pending'&&!match.scheduled_at&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-white mb-2\",children:\"Chat du match\"}),/*#__PURE__*/_jsx(Chat,{contextType:\"matches\",contextId:match.id})]})]});};const BracketView=()=>{return/*#__PURE__*/_jsx(TournamentBracket,{tournament:tournament,onMatchClick:handleMatchClick});};const CreateTeamForm=()=>{const[teamName,setTeamName]=useState('');const handleSubmit=e=>{e.preventDefault();if(teamName.trim()){handleCreateTeam(teamName.trim());setTeamName('');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"glass-effect rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white mb-4\",children:\"Cr\\xE9er une \\xE9quipe\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Nom de l'\\xE9quipe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:teamName,onChange:e=>setTeamName(e.target.value),className:\"input-primary w-full\",placeholder:\"Entrez le nom de votre \\xE9quipe\",required:true,minLength:2,maxLength:100})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:actionLoading||!teamName.trim(),className:\"btn-primary w-full flex items-center justify-center\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"w-5 h-5 mr-2\"}),actionLoading?'Création...':\"Créer l'équipe\"]})]})]});};if(loading||!tournament){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner w-12 h-12\"})});}// ✅ Affichage conditionnel du bloc Admin (corrige l’ancienne parenthèse orpheline)\n// Inclut désormais la permission can_edit renvoyée par l'API pour les administrateurs\nconst isTournamentAdmin=(tournament===null||tournament===void 0?void 0:tournament.can_edit)||(tournament===null||tournament===void 0?void 0:tournament.can_admin)||(tournament===null||tournament===void 0?void 0:tournament.can_manage)||(tournament===null||tournament===void 0?void 0:tournament.is_admin)||false;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-dark-950 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"glass-effect rounded-2xl p-8 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mr-3 text-white \".concat(getStateColor(tournament.state)),children:formatTournamentState(tournament.state)}),/*#__PURE__*/_jsxs(Link,{to:\"/organizations/\".concat(tournament.org_id),className:\"text-primary-400 hover:text-primary-300 font-medium\",children:[tournament.org_name,\" (\",tournament.org_tag,\")\"]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-white mb-4 text-shadow\",children:tournament.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4 mb-6 text-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarDaysIcon,{className:\"w-5 h-5 mr-2 text-primary-400\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(tournament.start_at_utc).toLocaleDateString('fr-FR',{weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(TrophyIcon,{className:\"w-5 h-5 mr-2 text-primary-400\"}),/*#__PURE__*/_jsx(\"span\",{children:formatTournamentFormat(tournament.format)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"w-5 h-5 mr-2 text-primary-400\"}),/*#__PURE__*/_jsxs(\"span\",{children:[tournament.team_count,\"/\",tournament.max_teams,\" \\xE9quipes\",/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:\"\\u2022\"}),tournament.team_size,\" joueurs/\\xE9quipe\"]})]}),tournament.prize_pool&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(StarIcon,{className:\"w-5 h-5 mr-2 text-accent-gold\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-accent-gold font-medium\",children:tournament.prize_pool})]})]})]}),tournament.banner_url&&/*#__PURE__*/_jsx(\"div\",{className:\"lg:ml-8 mt-6 lg:mt-0\",children:/*#__PURE__*/_jsx(\"img\",{src:tournament.banner_url,alt:tournament.name,className:\"w-full lg:w-64 h-40 object-cover rounded-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex space-x-8\",children:['bracket','teams','matches'].map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(tab),className:\"py-2 px-1 border-b-2 font-medium text-sm \".concat(activeTab===tab?'border-primary-500 text-primary-400':'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300'),children:tab==='bracket'?'Bracket':tab==='teams'?\"\\xC9quipes (\".concat(tournament.teams.length,\")\"):tab==='matches'?\"Matches (\".concat(tournament.matches.length,\")\"):tab},tab))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[activeTab==='bracket'&&/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsx(BracketView,{})}),activeTab==='teams'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold text-white mb-6\",children:[\"\\xC9quipes (\",tournament.teams.length,\")\"]}),tournament.teams.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:tournament.teams.map(team=>/*#__PURE__*/_jsx(TeamCard,{team:team},team.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"w-16 h-16 text-gray-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Aucune \\xE9quipe inscrite\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1\",children:[tournament.can_register&&isAuthenticated&&!tournament.my_team&&/*#__PURE__*/_jsx(CreateTeamForm,{}),tournament.my_team&&/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Mon \\xE9quipe\"}),tournament.my_team.can_manage&&/*#__PURE__*/_jsxs(Link,{to:\"/tournaments/\".concat(tournament.id,\"/teams/\").concat(tournament.my_team.id,\"/manage\"),className:\"btn-secondary flex items-center text-sm\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"w-4 h-4 mr-1\"}),\"G\\xE9rer\"]})]}),/*#__PURE__*/_jsx(TeamCard,{team:tournament.my_team})]})]})]}),activeTab==='matches'&&/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold text-white mb-6\",children:[\"Matches (\",tournament.matches.length,\")\"]}),tournament.matches.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:tournament.matches.map(match=>/*#__PURE__*/_jsx(MatchCard,{match:match},match.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(PlayIcon,{className:\"w-16 h-16 text-gray-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Aucun match programm\\xE9\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"glass-effect rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-4 justify-center\",children:tournament.can_register&&isAuthenticated&&!tournament.my_team&&/*#__PURE__*/_jsxs(Link,{to:\"/tournaments/\".concat(tournament.id,\"/players\"),className:\"btn-secondary flex items-center\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"w-4 h-4 mr-2\"}),\"Recherche d'\\xE9quipiers\"]})})}),isTournamentAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"glass-effect rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"w-5 h-5 text-primary-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-white\",children:\"Administration\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/tournaments/\".concat(tournament.id,\"/admin\"),className:\"btn-secondary flex items-center\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"w-4 h-4 mr-2\"}),\"G\\xE9rer le tournoi\"]}),tournament.state==='open_registration'&&tournament.team_count>=2&&/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{await tournamentService.closeTournamentRegistration(tournament.id);toast.success('Inscriptions fermées');await loadTournament();}catch(error){toast.error('Erreur lors de la fermeture des inscriptions');}},className:\"btn-primary flex items-center\",children:[/*#__PURE__*/_jsx(LockClosedIcon,{className:\"w-4 h-4 mr-2\"}),\"Fermer inscriptions\"]}),tournament.state==='registration_closed'&&tournament.team_count>=2&&/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{await tournamentService.startTournament(tournament.id);toast.success('Tournoi démarré !');await loadTournament();}catch(error){toast.error('Erreur lors du démarrage du tournoi');}},className:\"btn-success flex items-center\",children:[/*#__PURE__*/_jsx(PlayIcon,{className:\"w-4 h-4 mr-2\"}),\"D\\xE9marrer\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-white mb-4\",children:\"Description\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-300 leading-relaxed whitespace-pre-wrap\",children:tournament.description})]})]}),/*#__PURE__*/_jsx(MatchReportModal,{isOpen:reportModalOpen,onClose:()=>{setReportModalOpen(false);setSelectedMatch(null);},match:selectedMatch,currentUser:user,onMatchUpdated:loadTournament}),/*#__PURE__*/_jsx(MatchConfirmModal,{isOpen:confirmModalOpen,onClose:()=>{setConfirmModalOpen(false);setSelectedMatch(null);},match:selectedMatch,onConfirmed:loadTournament,onContest:()=>{setConfirmModalOpen(false);setDisputeModalOpen(true);}}),/*#__PURE__*/_jsx(MatchDisputeModal,{isOpen:disputeModalOpen,onClose:()=>{setDisputeModalOpen(false);setSelectedMatch(null);},match:selectedMatch,onDisputeCreated:loadTournament})]});};export default TournamentDetailPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","Link","toast","TrophyIcon","CalendarDaysIcon","UsersIcon","TagIcon","PlusIcon","DocumentArrowUpIcon","CheckCircleIcon","ClockIcon","PlayIcon","StarIcon","CogIcon","LockClosedIcon","LockOpenIcon","MagnifyingGlassIcon","tournamentService","useAuth","MatchReportModal","TournamentBracket","MatchDisputeModal","MatchConfirmModal","Chat","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TournamentDetailPage","id","tournament","setTournament","loading","setLoading","actionLoading","setActionLoading","activeTab","setActiveTab","reportModalOpen","setReportModalOpen","selectedMatch","setSelectedMatch","disputeModalOpen","setDisputeModalOpen","confirmModalOpen","setConfirmModalOpen","user","isAuthenticated","loadTournament","tournamentData","getTournament","error","console","handleCreateTeam","teamName","createTeam","name","success","_error$response","_error$response$data","response","data","detail","handleJoinTeam","teamId","addTeamMember","_error$response2","_error$response2$data","handleMatchClick","match","state","canReportScore","isMatchCaptain","reported_by","canDispute","can_report","team_a_captain_id","team_b_captain_id","includes","canScheduleMatch","scheduled_at","pending_scheduled_at","schedule_confirmations","canVerifyMatch","can_verify","canForfeitMatch","canUploadAttachment","handleScheduleMatch","input","prompt","scheduledAt","Date","isNaN","res","scheduleMatch","toISOString","message","_error$response3","_error$response3$data","handleAcceptSchedule","_error$response4","_error$response4$data","handleDeclineSchedule","declineMatchSchedule","info","_error$response5","_error$response5$data","handleVerifyMatch","verifyMatchResult","_error$response6","_error$response6$data","handleForfeitMatch","choice","concat","team_a_name","team_b_name","winnerTeamId","toLowerCase","startsWith","team_b_id","team_a_id","forfeitMatch","_error$response7","_error$response7$data","formatTournamentFormat","format","formats","se","de","rr","swiss","formatTournamentState","states","draft","open_registration","registration_closed","ongoing","finished","cancelled","getStateColor","colors","TeamCard","_ref","team","className","children","seed","captain_handle","member_count","team_size","wins","losses","points","members","slice","map","member","avatar_url","src","alt","handle","is_captain","user_id","length","can_register","my_team","onClick","disabled","can_manage","to","MatchCard","_ref2","fileInputRef","handleFileChange","e","file","target","files","description","uploadMatchAttachment","_error$response8","_error$response8$data","value","round","toLocaleDateString","day","month","hour","minute","toLocaleString","winner_team_id","score_a","score_b","notes","attachments","att","href","downloadAttachment","rel","filename","type","ref","onChange","current","click","contextType","contextId","BracketView","onMatchClick","CreateTeamForm","setTeamName","handleSubmit","preventDefault","trim","onSubmit","placeholder","required","minLength","maxLength","isTournamentAdmin","can_edit","can_admin","is_admin","org_id","org_name","org_tag","start_at_utc","weekday","year","team_count","max_teams","prize_pool","banner_url","tab","teams","matches","closeTournamentRegistration","startTournament","isOpen","onClose","currentUser","onMatchUpdated","onConfirmed","onContest","onDisputeCreated"],"sources":["C:/Users/Knight-Server/Desktop/VerseLink-conflict_090925_1049/frontend/src/pages/TournamentDetailPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { \n  TrophyIcon,\n  CalendarDaysIcon,\n  UsersIcon,\n  TagIcon,\n  PlusIcon,\n  DocumentArrowUpIcon,\n  CheckCircleIcon,\n  ClockIcon,\n  PlayIcon,\n  StarIcon,\n  CogIcon,\n  LockClosedIcon,\n  LockOpenIcon,\n  MagnifyingGlassIcon\n} from '@heroicons/react/24/outline';\nimport { tournamentService } from '../services/tournamentService';\nimport { useAuth } from '../App';\nimport MatchReportModal from '../components/MatchReportModal';\nimport TournamentBracket from '../components/TournamentBracket';\nimport MatchDisputeModal from '../components/MatchDisputeModal';\nimport MatchConfirmModal from '../components/MatchConfirmModal';\nimport Chat from '../components/Chat';\n\nconst TournamentDetailPage = () => {\n  const { id } = useParams();\n  const [tournament, setTournament] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [actionLoading, setActionLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('bracket');\n  const [reportModalOpen, setReportModalOpen] = useState(false);\n  const [selectedMatch, setSelectedMatch] = useState(null);\n  const [disputeModalOpen, setDisputeModalOpen] = useState(false);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const { user, isAuthenticated } = useAuth();\n\n  useEffect(() => {\n    if (id) {\n      loadTournament();\n    }\n  }, [id]);\n\n  const loadTournament = async () => {\n    try {\n      setLoading(true);\n      const tournamentData = await tournamentService.getTournament(id);\n      setTournament(tournamentData);\n    } catch (error) {\n      console.error('Failed to load tournament:', error);\n      toast.error('Tournoi non trouvé');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateTeam = async (teamName) => {\n    if (!isAuthenticated) {\n      toast.error('Vous devez être connecté pour créer une équipe');\n      return;\n    }\n\n    try {\n      setActionLoading(true);\n      await tournamentService.createTeam(tournament.id, { name: teamName });\n      toast.success('Équipe créée avec succès !');\n      await loadTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error(\"Erreur lors de la création de l'équipe\");\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleJoinTeam = async (teamId) => {\n    if (!isAuthenticated || !user) {\n      toast.error('Vous devez être connecté pour rejoindre une équipe');\n      return;\n    }\n\n    try {\n      setActionLoading(true);\n      await tournamentService.addTeamMember(tournament.id, teamId, user.id);\n      toast.success(\"Vous avez rejoint l'équipe !\");\n      await loadTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error(\"Erreur lors de l'adhésion à l'équipe\");\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleMatchClick = (match) => {\n    setSelectedMatch(match);\n    if (match.state === 'pending' && canReportScore(match)) {\n      setReportModalOpen(true);\n    } else if (\n      match.state === 'reported' &&\n      isMatchCaptain(match) &&\n      match.reported_by !== user?.id\n    ) {\n      setConfirmModalOpen(true);\n    } else if (canDispute(match)) {\n      setDisputeModalOpen(true);\n    }\n  };\n\n  const canReportScore = (match) => {\n    if (!isAuthenticated || !user) return false;\n    // Check if user is capitaine d'une des équipes\n    return (\n      match.can_report ||\n      match.team_a_captain_id === user.id ||\n      match.team_b_captain_id === user.id\n    );\n  };\n\n  const canDispute = (match) => {\n    if (!isAuthenticated || !user) return false;\n    return (\n      ['reported', 'verified'].includes(match.state) &&\n      (match.team_a_captain_id === user.id || match.team_b_captain_id === user.id)\n    );\n  };\n\n  const canScheduleMatch = (match) => {\n    if (!isAuthenticated || !user) return false;\n\n    return (\n      match.state === 'pending' &&\n      !match.scheduled_at &&\n      (match.team_a_captain_id === user.id || match.team_b_captain_id === user.id) &&\n      (!match.pending_scheduled_at || match.schedule_confirmations.includes(user.id))\n    );\n  };\n\n  const isMatchCaptain = (match) => {\n    return (\n      isAuthenticated &&\n      user &&\n      (match.team_a_captain_id === user.id || match.team_b_captain_id === user.id)\n    );\n  };\n\n  const canVerifyMatch = (match) => {\n    if (!isAuthenticated || !user) return false;\n    return match.state === 'reported' && match.can_verify;\n  };\n\n  const canForfeitMatch = (match) => {\n    if (!isAuthenticated || !user) return false;\n    return match.state === 'pending' && match.can_verify;\n  };\n\n  const canUploadAttachment = (match) => {\n    if (!isAuthenticated || !user) return false;\n    return canReportScore(match) || match.can_verify;\n  };\n\n  const handleScheduleMatch = async (match) => {\n    const input = prompt('Date et heure du match (YYYY-MM-DD HH:MM)');\n    if (!input) return;\n\n    const scheduledAt = new Date(input);\n    if (isNaN(scheduledAt)) {\n      toast.error('Date invalide');\n      return;\n    }\n\n    try {\n      setActionLoading(true);\n      const res = await tournamentService.scheduleMatch(match.id, scheduledAt.toISOString());\n      toast.success(res.message || 'Match programmé');\n      await loadTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error('Erreur lors de la programmation du match');\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleAcceptSchedule = async (match) => {\n    try {\n      setActionLoading(true);\n      const res = await tournamentService.scheduleMatch(match.id, match.pending_scheduled_at);\n      toast.success(res.message || 'Match programmé');\n      await loadTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error(\"Erreur lors de l'acceptation de la date\");\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleDeclineSchedule = async (match) => {\n    try {\n      setActionLoading(true);\n      await tournamentService.declineMatchSchedule(match.id);\n      toast.info('Proposition refusée');\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error(\"Erreur lors du refus de la date\");\n      }\n    } finally {\n      setActionLoading(false);\n    }\n    handleScheduleMatch(match);\n  };\n\n  const handleVerifyMatch = async (match) => {\n    try {\n      setActionLoading(true);\n      await tournamentService.verifyMatchResult(match.id);\n      toast.success('Match vérifié');\n      await loadTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error('Erreur lors de la vérification du match');\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleForfeitMatch = async (match) => {\n    const choice = prompt(`Quelle équipe gagne par forfait ?\\nA: ${match.team_a_name}\\nB: ${match.team_b_name}`);\n    if (!choice) return;\n    const winnerTeamId = choice.toLowerCase().startsWith('b') ? match.team_b_id : match.team_a_id;\n    try {\n      setActionLoading(true);\n      await tournamentService.forfeitMatch(match.id, winnerTeamId);\n      toast.success('Match terminé par forfait');\n      await loadTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error('Erreur lors du forfait du match');\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const formatTournamentFormat = (format) => {\n    const formats = {\n      se: 'Simple Élimination',\n      de: 'Double Élimination',\n      rr: 'Round Robin',\n      swiss: 'Système Suisse',\n    };\n    return formats[format] || format;\n  };\n\n  const formatTournamentState = (state) => {\n    const states = {\n      draft: 'Brouillon',\n      open_registration: 'Inscriptions ouvertes',\n      registration_closed: 'Inscriptions fermées',\n      ongoing: 'En cours',\n      finished: 'Terminé',\n      cancelled: 'Annulé',\n    };\n    return states[state] || state;\n  };\n\n  const getStateColor = (state) => {\n    const colors = {\n      draft: 'bg-gray-600',\n      open_registration: 'bg-green-600',\n      registration_closed: 'bg-yellow-600',\n      ongoing: 'bg-blue-600',\n      finished: 'bg-purple-600',\n      cancelled: 'bg-red-600',\n    };\n    return colors[state] || 'bg-gray-600';\n  };\n\n  const TeamCard = ({ team }) => (\n    <div className=\"glass-effect rounded-lg p-4\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <div>\n          <h4 className=\"text-white font-semibold text-lg flex items-center\">\n            {team.seed && (\n              <span className=\"bg-primary-600 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center mr-2\">\n                {team.seed}\n              </span>\n            )}\n            {team.name}\n          </h4>\n          <p className=\"text-gray-400 text-sm\">Capitaine: {team.captain_handle}</p>\n        </div>\n\n        <div className=\"text-right\">\n          <div className=\"text-sm text-gray-300\">\n            {team.member_count}/{tournament.team_size} membres\n          </div>\n          {tournament.format === 'rr' && (\n            <div className=\"text-xs text-gray-400\">\n              {team.wins}V - {team.losses}D ({team.points} pts)\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Team Members */}\n      <div className=\"space-y-1\">\n        {team.members.slice(0, 3).map((member) => (\n          <div key={member.user_id} className=\"flex items-center text-sm text-gray-300\">\n            {member.avatar_url ? (\n              <img src={member.avatar_url} alt={member.handle} className=\"w-4 h-4 rounded-full mr-2\" />\n            ) : (\n              <div className=\"w-4 h-4 bg-dark-600 rounded-full mr-2\"></div>\n            )}\n            <span>{member.handle}</span>\n            {member.is_captain && <StarIcon className=\"w-3 h-3 text-yellow-400 ml-1\" />}\n          </div>\n        ))}\n        {team.members.length > 3 && (\n          <div className=\"text-xs text-gray-500\">+{team.members.length - 3} autres membres</div>\n        )}\n      </div>\n\n      {tournament.can_register &&\n        isAuthenticated &&\n        !tournament.my_team &&\n        team.member_count < tournament.team_size && (\n          <div className=\"mt-3 text-center\">\n            <button\n              onClick={() => handleJoinTeam(team.id)}\n              disabled={actionLoading}\n              className=\"text-sm text-primary-400 hover:text-primary-300 font-medium\"\n            >\n              Rejoindre l'équipe →\n            </button>\n          </div>\n        )}\n\n      {/* Team Management Link for Captain */}\n      {tournament.my_team && tournament.my_team.id === team.id && tournament.my_team.can_manage && (\n        <div className=\"mt-3 text-center\">\n          <Link\n            to={`/tournaments/${tournament.id}/teams/${team.id}/manage`}\n            className=\"text-sm text-primary-400 hover:text-primary-300 font-medium\"\n          >\n            Gérer l'équipe →\n          </Link>\n        </div>\n      )}\n    </div>\n  );\n\n  const MatchCard = ({ match }) => {\n    const fileInputRef = useRef(null);\n\n    const handleFileChange = async (e) => {\n      const file = e.target.files[0];\n      if (!file) return;\n      const description = prompt('Description de la preuve (optionnel)') || '';\n      try {\n        await tournamentService.uploadMatchAttachment(match.id, file, description);\n        toast.success('Preuve envoyée');\n        await loadTournament();\n      } catch (error) {\n        if (error.response?.data?.detail) {\n          toast.error(error.response.data.detail);\n        } else {\n          toast.error(\"Erreur lors de l'envoi de la preuve\");\n        }\n      } finally {\n        e.target.value = '';\n      }\n    };\n\n    return (\n      <div className=\"glass-effect rounded-lg p-4 mb-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div>\n            <span className=\"text-xs bg-dark-600 text-gray-300 px-2 py-1 rounded\">Round {match.round}</span>\n            <span\n              className={`ml-2 text-xs px-2 py-1 rounded text-white ${\n                match.state === 'verified'\n                  ? 'bg-green-600'\n                  : match.state === 'reported'\n                  ? 'bg-yellow-600'\n                  : match.state === 'live'\n                  ? 'bg-blue-600'\n                  : 'bg-gray-600'\n              }`}\n            >\n              {match.state === 'verified'\n                ? 'Terminé'\n                : match.state === 'reported'\n                ? 'Reporté'\n                : match.state === 'live'\n                ? 'En cours'\n                : 'À venir'}\n            </span>\n          </div>\n\n          {match.scheduled_at && (\n          <div className=\"text-xs text-gray-400\">\n            {new Date(match.scheduled_at).toLocaleDateString('fr-FR', {\n              day: '2-digit',\n              month: '2-digit',\n              hour: '2-digit',\n              minute: '2-digit',\n            })}\n          </div>\n        )}\n        {match.pending_scheduled_at && !match.scheduled_at && (\n          <div className=\"text-xs text-yellow-400\">\n            {new Date(match.pending_scheduled_at).toLocaleString('fr-FR', {\n              day: '2-digit',\n              month: '2-digit',\n              hour: '2-digit',\n              minute: '2-digit',\n            })}\n            {isMatchCaptain(match) && !match.schedule_confirmations.includes(user.id) ? (\n              <div className=\"mt-1 space-x-2\">\n                <button\n                  onClick={() => handleAcceptSchedule(match)}\n                  disabled={actionLoading}\n                  className=\"px-2 py-1 bg-green-600 text-white rounded text-xs\"\n                >\n                  Accepter\n                </button>\n                <button\n                  onClick={() => handleDeclineSchedule(match)}\n                  disabled={actionLoading}\n                  className=\"px-2 py-1 bg-red-600 text-white rounded text-xs\"\n                >\n                  Refuser\n                </button>\n              </div>\n            ) : (\n              <span className=\"ml-1\">(en attente de confirmation)</span>\n            )}\n          </div>\n        )}\n      </div>\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-white\">\n            <div className={`font-medium ${match.winner_team_id === match.team_a_id ? 'text-green-400' : ''}`}>\n              {match.team_a_name || 'TBD'}\n            </div>\n            <div className={`font-medium ${match.winner_team_id === match.team_b_id ? 'text-green-400' : ''}`}>\n              {match.team_b_name || 'TBD'}\n            </div>\n          </div>\n\n          {match.score_a !== null && match.score_b !== null && (\n            <div className=\"text-right\">\n              <div\n                className={`font-bold ${\n                  match.winner_team_id === match.team_a_id ? 'text-green-400' : 'text-gray-400'\n                }`}\n              >\n                {match.score_a}\n              </div>\n              <div\n                className={`font-bold ${\n                  match.winner_team_id === match.team_b_id ? 'text-green-400' : 'text-gray-400'\n                }`}\n              >\n                {match.score_b}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {match.notes && <div className=\"mt-2 text-xs text-gray-400 italic\">{match.notes}</div>}\n\n        {match.attachments && match.attachments.length > 0 && (\n          <div className=\"mt-2 text-xs space-y-1\">\n            {match.attachments.map((att) => (\n              <a\n                key={att.id}\n                href={tournamentService.downloadAttachment(att.id)}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"block text-primary-400 hover:text-primary-300\"\n              >\n                {att.description || att.filename}\n              </a>\n            ))}\n          </div>\n        )}\n\n        {/* Actions */}\n        {(canScheduleMatch(match) ||\n          (canReportScore(match) && match.state === 'pending') ||\n          canVerifyMatch(match) ||\n          canForfeitMatch(match) ||\n          canUploadAttachment(match)) && (\n          <div className=\"mt-3 text-center space-y-2\">\n            {canScheduleMatch(match) && (\n              <button\n                onClick={() => handleScheduleMatch(match)}\n                disabled={actionLoading}\n                className=\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\"\n              >\n                Programmer le match →\n              </button>\n            )}\n            {canReportScore(match) && match.state === 'pending' && (\n              <button\n                onClick={() => handleMatchClick(match)}\n                className=\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\"\n              >\n                Reporter le score →\n              </button>\n            )}\n            {canVerifyMatch(match) && (\n              <button\n                onClick={() => handleVerifyMatch(match)}\n                disabled={actionLoading}\n                className=\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\"\n              >\n                Vérifier le match →\n              </button>\n            )}\n            {canForfeitMatch(match) && (\n              <button\n                onClick={() => handleForfeitMatch(match)}\n                disabled={actionLoading}\n                className=\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full\"\n              >\n                Forfait du match →\n              </button>\n            )}\n            {canUploadAttachment(match) && (\n              <>\n                <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" />\n                <button\n                  onClick={() => fileInputRef.current && fileInputRef.current.click()}\n                  className=\"text-sm text-primary-400 hover:text-primary-300 font-medium block w-full flex items-center justify-center\"\n                >\n                  <DocumentArrowUpIcon className=\"w-4 h-4 mr-1\" /> Envoyer une preuve →\n                </button>\n              </>\n            )}\n          </div>\n        )}\n        {isMatchCaptain(match) && match.state === 'pending' && !match.scheduled_at && (\n          <div className=\"mt-4\">\n            <h4 className=\"text-lg font-medium text-white mb-2\">Chat du match</h4>\n            <Chat contextType=\"matches\" contextId={match.id} />\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const BracketView = () => {\n    return <TournamentBracket tournament={tournament} onMatchClick={handleMatchClick} />;\n  };\n\n  const CreateTeamForm = () => {\n    const [teamName, setTeamName] = useState('');\n\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      if (teamName.trim()) {\n        handleCreateTeam(teamName.trim());\n        setTeamName('');\n      }\n    };\n\n    return (\n      <form onSubmit={handleSubmit} className=\"glass-effect rounded-lg p-6\">\n        <h3 className=\"text-xl font-bold text-white mb-4\">Créer une équipe</h3>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">Nom de l'équipe</label>\n            <input\n              type=\"text\"\n              value={teamName}\n              onChange={(e) => setTeamName(e.target.value)}\n              className=\"input-primary w-full\"\n              placeholder=\"Entrez le nom de votre équipe\"\n              required\n              minLength={2}\n              maxLength={100}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            disabled={actionLoading || !teamName.trim()}\n            className=\"btn-primary w-full flex items-center justify-center\"\n          >\n            <PlusIcon className=\"w-5 h-5 mr-2\" />\n            {actionLoading ? 'Création...' : \"Créer l'équipe\"}\n          </button>\n        </div>\n      </form>\n    );\n  };\n\n  if (loading || !tournament) {\n    return (\n      <div className=\"min-h-screen bg-dark-950 flex items-center justify-center\">\n        <div className=\"loading-spinner w-12 h-12\"></div>\n      </div>\n    );\n  }\n\n  // ✅ Affichage conditionnel du bloc Admin (corrige l’ancienne parenthèse orpheline)\n  // Inclut désormais la permission can_edit renvoyée par l'API pour les administrateurs\n  const isTournamentAdmin =\n    tournament?.can_edit ||\n    tournament?.can_admin ||\n    tournament?.can_manage ||\n    tournament?.is_admin ||\n    false;\n\n  return (\n    <div className=\"min-h-screen bg-dark-950 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"glass-effect rounded-2xl p-8 mb-8\">\n          <div className=\"flex flex-col lg:flex-row\">\n            {/* Tournament Info */}\n            <div className=\"flex-1\">\n              <div className=\"flex items-center mb-4\">\n                <span\n                  className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mr-3 text-white ${getStateColor(\n                    tournament.state\n                  )}`}\n                >\n                  {formatTournamentState(tournament.state)}\n                </span>\n                <Link\n                  to={`/organizations/${tournament.org_id}`}\n                  className=\"text-primary-400 hover:text-primary-300 font-medium\"\n                >\n                  {tournament.org_name} ({tournament.org_tag})\n                </Link>\n              </div>\n\n              <h1 className=\"text-4xl font-bold text-white mb-4 text-shadow\">{tournament.name}</h1>\n\n              <div className=\"grid md:grid-cols-2 gap-4 mb-6 text-gray-300\">\n                <div className=\"flex items-center\">\n                  <CalendarDaysIcon className=\"w-5 h-5 mr-2 text-primary-400\" />\n                  <span>\n                    {new Date(tournament.start_at_utc).toLocaleDateString('fr-FR', {\n                      weekday: 'long',\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit',\n                    })}\n                  </span>\n                </div>\n\n                <div className=\"flex items-center\">\n                  <TrophyIcon className=\"w-5 h-5 mr-2 text-primary-400\" />\n                  <span>{formatTournamentFormat(tournament.format)}</span>\n                </div>\n\n                <div className=\"flex items-center\">\n                  <UsersIcon className=\"w-5 h-5 mr-2 text-primary-400\" />\n                  <span>\n                    {tournament.team_count}/{tournament.max_teams} équipes\n                    <span className=\"mx-2\">•</span>\n                    {tournament.team_size} joueurs/équipe\n                  </span>\n                </div>\n\n                {tournament.prize_pool && (\n                  <div className=\"flex items-center\">\n                    <StarIcon className=\"w-5 h-5 mr-2 text-accent-gold\" />\n                    <span className=\"text-accent-gold font-medium\">{tournament.prize_pool}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Banner */}\n            {tournament.banner_url && (\n              <div className=\"lg:ml-8 mt-6 lg:mt-0\">\n                <img\n                  src={tournament.banner_url}\n                  alt={tournament.name}\n                  className=\"w-full lg:w-64 h-40 object-cover rounded-xl\"\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"mb-6\">\n          <nav className=\"flex space-x-8\">\n            {['bracket', 'teams', 'matches'].map((tab) => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === tab\n                    ? 'border-primary-500 text-primary-400'\n                    : 'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300'\n                }`}\n              >\n                {tab === 'bracket'\n                  ? 'Bracket'\n                  : tab === 'teams'\n                  ? `Équipes (${tournament.teams.length})`\n                  : tab === 'matches'\n                  ? `Matches (${tournament.matches.length})`\n                  : tab}\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"space-y-6\">\n          {activeTab === 'bracket' && (\n            <div className=\"card p-6\">\n              <BracketView />\n            </div>\n          )}\n\n          {activeTab === 'teams' && (\n            <div className=\"grid lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-2\">\n                <div className=\"card p-6\">\n                  <h3 className=\"text-2xl font-bold text-white mb-6\">Équipes ({tournament.teams.length})</h3>\n\n                  {tournament.teams.length > 0 ? (\n                    <div className=\"grid gap-4\">\n                      {tournament.teams.map((team) => (\n                        <TeamCard key={team.id} team={team} />\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <UsersIcon className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\n                      <p className=\"text-gray-400\">Aucune équipe inscrite</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Registration */}\n              <div className=\"lg:col-span-1\">\n                {tournament.can_register && isAuthenticated && !tournament.my_team && <CreateTeamForm />}\n\n                {tournament.my_team && (\n                  <div className=\"glass-effect rounded-lg p-6\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <h3 className=\"text-xl font-bold text-white\">Mon équipe</h3>\n                      {tournament.my_team.can_manage && (\n                        <Link\n                          to={`/tournaments/${tournament.id}/teams/${tournament.my_team.id}/manage`}\n                          className=\"btn-secondary flex items-center text-sm\"\n                        >\n                          <CogIcon className=\"w-4 h-4 mr-1\" />\n                          Gérer\n                        </Link>\n                      )}\n                    </div>\n                    <TeamCard team={tournament.my_team} />\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'matches' && (\n            <div className=\"card p-6\">\n              <h3 className=\"text-2xl font-bold text-white mb-6\">Matches ({tournament.matches.length})</h3>\n\n              {tournament.matches.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {tournament.matches.map((match) => (\n                    <MatchCard key={match.id} match={match} />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <PlayIcon className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\n                  <p className=\"text-gray-400\">Aucun match programmé</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"glass-effect rounded-lg p-4 mb-6\">\n          <div className=\"flex flex-wrap gap-4 justify-center\">\n            {tournament.can_register && isAuthenticated && !tournament.my_team && (\n              <Link to={`/tournaments/${tournament.id}/players`} className=\"btn-secondary flex items-center\">\n                <MagnifyingGlassIcon className=\"w-4 h-4 mr-2\" />\n                Recherche d'équipiers\n              </Link>\n            )}\n          </div>\n        </div>\n\n        {/* Admin Actions - Only show to tournament admins */}\n        {isTournamentAdmin && (\n          <div className=\"glass-effect rounded-lg p-4 mb-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <CogIcon className=\"w-5 h-5 text-primary-400\" />\n                <span className=\"font-medium text-white\">Administration</span>\n              </div>\n\n              <div className=\"flex space-x-3\">\n                <Link to={`/tournaments/${tournament.id}/admin`} className=\"btn-secondary flex items-center\">\n                  <CogIcon className=\"w-4 h-4 mr-2\" />\n                  Gérer le tournoi\n                </Link>\n\n                {tournament.state === 'open_registration' && tournament.team_count >= 2 && (\n                  <button\n                    onClick={async () => {\n                      try {\n                        await tournamentService.closeTournamentRegistration(tournament.id);\n                        toast.success('Inscriptions fermées');\n                        await loadTournament();\n                      } catch (error) {\n                        toast.error('Erreur lors de la fermeture des inscriptions');\n                      }\n                    }}\n                    className=\"btn-primary flex items-center\"\n                  >\n                    <LockClosedIcon className=\"w-4 h-4 mr-2\" />\n                    Fermer inscriptions\n                  </button>\n                )}\n\n                {tournament.state === 'registration_closed' && tournament.team_count >= 2 && (\n                  <button\n                    onClick={async () => {\n                      try {\n                        await tournamentService.startTournament(tournament.id);\n                        toast.success('Tournoi démarré !');\n                        await loadTournament();\n                      } catch (error) {\n                        toast.error('Erreur lors du démarrage du tournoi');\n                      }\n                    }}\n                    className=\"btn-success flex items-center\"\n                  >\n                    <PlayIcon className=\"w-4 h-4 mr-2\" />\n                    Démarrer\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Description */}\n        <div className=\"card p-6 mt-6\">\n          <h3 className=\"text-2xl font-bold text-white mb-4\">Description</h3>\n          <div className=\"text-gray-300 leading-relaxed whitespace-pre-wrap\">{tournament.description}</div>\n        </div>\n      </div>\n\n      {/* Match Report Modal */}\n      <MatchReportModal\n        isOpen={reportModalOpen}\n        onClose={() => {\n          setReportModalOpen(false);\n          setSelectedMatch(null);\n        }}\n        match={selectedMatch}\n        currentUser={user}\n        onMatchUpdated={loadTournament}\n      />\n\n      {/* Match Confirm Modal */}\n      <MatchConfirmModal\n        isOpen={confirmModalOpen}\n        onClose={() => {\n          setConfirmModalOpen(false);\n          setSelectedMatch(null);\n        }}\n        match={selectedMatch}\n        onConfirmed={loadTournament}\n        onContest={() => {\n          setConfirmModalOpen(false);\n          setDisputeModalOpen(true);\n        }}\n      />\n\n      {/* Match Dispute Modal */}\n      <MatchDisputeModal\n        isOpen={disputeModalOpen}\n        onClose={() => {\n          setDisputeModalOpen(false);\n          setSelectedMatch(null);\n        }}\n        match={selectedMatch}\n        onDisputeCreated={loadTournament}\n      />\n    </div>\n  );\n};\n\nexport default TournamentDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}