{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{toast}from'react-hot-toast';import{UsersIcon,PencilIcon,TrashIcon,UserPlusIcon,UserMinusIcon,ExclamationTriangleIcon,ArrowLeftIcon,StarIcon,CalendarDaysIcon,TrophyIcon,CogIcon}from'@heroicons/react/24/outline';import{tournamentService}from'../services/tournamentService';import{useAuth}from'../App';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TeamManagementPage=()=>{const{tournamentId,teamId}=useParams();const navigate=useNavigate();const[team,setTeam]=useState(null);const[tournament,setTournament]=useState(null);const[loading,setLoading]=useState(true);const[actionLoading,setActionLoading]=useState(false);const[editMode,setEditMode]=useState(false);const[teamName,setTeamName]=useState('');const[showDeleteConfirm,setShowDeleteConfirm]=useState(false);const[memberToRemove,setMemberToRemove]=useState(null);const[showInviteModal,setShowInviteModal]=useState(false);const[inviteHandle,setInviteHandle]=useState('');const[inviteMessage,setInviteMessage]=useState('');const[teamInvitations,setTeamInvitations]=useState([]);const[activeTab,setActiveTab]=useState('members');const{user,isAuthenticated}=useAuth();useEffect(()=>{if(tournamentId&&teamId){loadTeamAndTournament();}},[tournamentId,teamId]);const loadTeamAndTournament=async()=>{try{setLoading(true);const[teamData,tournamentData]=await Promise.all([tournamentService.getTeamDetails(tournamentId,teamId),tournamentService.getTournament(tournamentId)]);setTeam(teamData);setTournament(tournamentData);setTeamName(teamData.name);// Load team invitations if user is captain\nif(teamData.can_manage){await loadTeamInvitations();}// Check if user has permission to manage this team\nif(!teamData.can_manage&&!teamData.is_member){toast.error('Vous n\\'avez pas accès à cette équipe');navigate(\"/tournaments/\".concat(tournamentId));}}catch(error){console.error('Failed to load team:',error);toast.error('Erreur lors du chargement de l\\'équipe');navigate(\"/tournaments/\".concat(tournamentId));}finally{setLoading(false);}};const loadTeamInvitations=async()=>{try{const invitations=await tournamentService.getTeamInvitations(tournamentId,teamId);setTeamInvitations(invitations);}catch(error){console.error('Failed to load team invitations:',error);}};const handleUpdateTeam=async e=>{e.preventDefault();if(!teamName.trim()){toast.error('Le nom de l\\'équipe est requis');return;}try{setActionLoading(true);await tournamentService.updateTeam(tournamentId,teamId,{name:teamName.trim()});toast.success('Équipe mise à jour avec succès !');setEditMode(false);await loadTeamAndTournament();}catch(error){var _error$response,_error$response$data;if((_error$response=error.response)!==null&&_error$response!==void 0&&(_error$response$data=_error$response.data)!==null&&_error$response$data!==void 0&&_error$response$data.detail){toast.error(error.response.data.detail);}else{toast.error('Erreur lors de la mise à jour de l\\'équipe');}}finally{setActionLoading(false);}};const handleDeleteTeam=async()=>{try{setActionLoading(true);await tournamentService.deleteTeam(tournamentId,teamId);toast.success('Équipe supprimée avec succès');navigate(\"/tournaments/\".concat(tournamentId));}catch(error){var _error$response2,_error$response2$data;if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.detail){toast.error(error.response.data.detail);}else{toast.error('Erreur lors de la suppression de l\\'équipe');}}finally{setActionLoading(false);setShowDeleteConfirm(false);}};const handleRemoveMember=async userId=>{try{setActionLoading(true);await tournamentService.removeTeamMember(tournamentId,teamId,userId);toast.success('Membre retiré de l\\'équipe');await loadTeamAndTournament();}catch(error){var _error$response3,_error$response3$data;if((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.detail){toast.error(error.response.data.detail);}else{toast.error('Erreur lors du retrait du membre');}}finally{setActionLoading(false);setMemberToRemove(null);}};const handleLeaveTeam=async()=>{try{setActionLoading(true);await tournamentService.leaveTeam(tournamentId,teamId);toast.success('Vous avez quitté l\\'équipe');navigate(\"/tournaments/\".concat(tournamentId));}catch(error){var _error$response4,_error$response4$data;if((_error$response4=error.response)!==null&&_error$response4!==void 0&&(_error$response4$data=_error$response4.data)!==null&&_error$response4$data!==void 0&&_error$response4$data.detail){toast.error(error.response.data.detail);}else{toast.error('Erreur lors de la sortie de l\\'équipe');}}finally{setActionLoading(false);}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('fr-FR',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});};const canEditTeam=()=>{return(team===null||team===void 0?void 0:team.can_manage)&&(tournament===null||tournament===void 0?void 0:tournament.state)==='open_registration';};const canDeleteTeam=()=>{return(team===null||team===void 0?void 0:team.can_manage)&&(tournament===null||tournament===void 0?void 0:tournament.state)==='open_registration';};if(loading||!team||!tournament){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner w-12 h-12\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-dark-950 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-8\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/tournaments/\".concat(tournamentId),className:\"flex items-center text-gray-400 hover:text-white mr-4\",children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"w-5 h-5 mr-2\"}),\"Retour au tournoi\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"w-8 h-8 text-primary-400\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white\",children:\"Gestion d'\\xE9quipe\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"glass-effect rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-white\",children:tournament.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:formatDate(tournament.start_at_utc)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium text-white \".concat(tournament.state==='open_registration'?'bg-green-600':tournament.state==='registration_closed'?'bg-yellow-600':tournament.state==='ongoing'?'bg-blue-600':'bg-gray-600'),children:tournament.state==='open_registration'?'Inscriptions ouvertes':tournament.state==='registration_closed'?'Inscriptions fermées':tournament.state==='ongoing'?'En cours':tournament.state})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-xl p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold text-white flex items-center\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"w-7 h-7 mr-3 text-primary-400\"}),editMode?'Modifier l\\'équipe':'Informations de l\\'équipe']}),team.can_manage&&canEditTeam()&&!editMode&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setEditMode(true),className:\"btn-secondary flex items-center\",children:[/*#__PURE__*/_jsx(PencilIcon,{className:\"w-4 h-4 mr-2\"}),\"Modifier\"]})]}),editMode?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateTeam,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Nom de l'\\xE9quipe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:teamName,onChange:e=>setTeamName(e.target.value),className:\"input-primary w-full\",placeholder:\"Nom de l'\\xE9quipe\",required:true,minLength:2,maxLength:100})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:actionLoading,className:\"btn-primary flex items-center\",children:actionLoading?'Sauvegarde...':'Sauvegarder'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setEditMode(false);setTeamName(team.name);},className:\"btn-secondary\",children:\"Annuler\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-xl font-semibold text-white flex items-center\",children:[team.seed&&/*#__PURE__*/_jsx(\"span\",{className:\"bg-primary-600 text-white text-sm rounded-full w-7 h-7 flex items-center justify-center mr-3 font-bold\",children:team.seed}),team.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400\",children:[\"\\xC9quipe cr\\xE9\\xE9e le \",formatDate(team.created_at)]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-4 mt-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-700 rounded-lg p-4 border border-dark-600\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"w-8 h-8 text-primary-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-white\",children:team.member_count}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-400\",children:[\"Membres (\",tournament.team_size,\" max)\"]})]})]})}),tournament.format==='rr'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-700 rounded-lg p-4 border border-dark-600\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(TrophyIcon,{className:\"w-8 h-8 text-green-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-white\",children:team.wins}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Victoires\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-700 rounded-lg p-4 border border-dark-600\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(StarIcon,{className:\"w-8 h-8 text-yellow-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-white\",children:team.points}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Points\"})]})]})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-white mb-6 flex items-center\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"w-6 h-6 mr-3 text-primary-400\"}),\"Membres de l'\\xE9quipe (\",team.members.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:team.members.map(member=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-dark-700 rounded-lg border border-dark-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[member.avatar_url?/*#__PURE__*/_jsx(\"img\",{src:member.avatar_url,alt:member.handle,className:\"w-10 h-10 rounded-full\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-dark-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UsersIcon,{className:\"w-5 h-5 text-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-white\",children:member.handle}),member.is_captain&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-xs bg-yellow-600 text-white px-2 py-1 rounded-full\",children:[/*#__PURE__*/_jsx(StarIcon,{className:\"w-3 h-3 mr-1\"}),\"Capitaine\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-400\",children:[\"Rejoint le \",formatDate(member.joined_at)]})]})]}),team.can_manage&&!member.is_captain&&canEditTeam()&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMemberToRemove(member),className:\"text-red-400 hover:text-red-300 p-2 rounded-lg hover:bg-red-900/20 transition-colors duration-200\",title:\"Retirer de l'\\xE9quipe\",children:/*#__PURE__*/_jsx(UserMinusIcon,{className:\"w-5 h-5\"})})]},member.user_id))}),team.member_count<tournament.team_size&&canEditTeam()&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-dark-700 rounded-lg border border-dark-600 border-dashed\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(UserPlusIcon,{className:\"w-12 h-12 text-gray-500 mx-auto mb-3\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 mb-4\",children:[\"Il reste \",tournament.team_size-team.member_count,\" place(s) disponible(s)\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Les joueurs peuvent rejoindre votre \\xE9quipe depuis la page du tournoi\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-xl p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white mb-4\",children:\"Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[team.is_member&&!team.can_manage&&tournament.state==='open_registration'&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleLeaveTeam,disabled:actionLoading,className:\"w-full btn-danger flex items-center justify-center\",children:[/*#__PURE__*/_jsx(UserMinusIcon,{className:\"w-4 h-4 mr-2\"}),\"Quitter l'\\xE9quipe\"]}),team.can_manage&&canDeleteTeam()&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowDeleteConfirm(true),disabled:actionLoading,className:\"w-full btn-danger flex items-center justify-center\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4 mr-2\"}),\"Supprimer l'\\xE9quipe\"]})]}),!canEditTeam()&&tournament.state!=='open_registration'&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-yellow-900/20 border border-yellow-500/30 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"w-5 h-5 text-yellow-400 mr-2 mt-0.5\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-300 text-sm\",children:\"Les modifications ne sont plus possibles car les inscriptions sont ferm\\xE9es.\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white mb-4\",children:\"Informations du tournoi\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-300\",children:[/*#__PURE__*/_jsx(CalendarDaysIcon,{className:\"w-4 h-4 mr-2 text-primary-400\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(tournament.start_at_utc)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-300\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"w-4 h-4 mr-2 text-primary-400\"}),/*#__PURE__*/_jsxs(\"span\",{children:[tournament.team_count,\"/\",tournament.max_teams,\" \\xE9quipes\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-300\",children:[/*#__PURE__*/_jsx(TrophyIcon,{className:\"w-4 h-4 mr-2 text-primary-400\"}),/*#__PURE__*/_jsx(\"span\",{children:tournament.format==='se'?'Simple Élimination':tournament.format==='de'?'Double Élimination':tournament.format==='rr'?'Round Robin':'Format personnalisé'})]})]})]})]})]})]}),showDeleteConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-800 rounded-lg max-w-md w-full p-6 border border-red-500/30\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"w-8 h-8 text-red-400 mr-3\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Supprimer l'\\xE9quipe\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 mb-6\",children:[\"\\xCAtes-vous s\\xFBr de vouloir supprimer l'\\xE9quipe \",/*#__PURE__*/_jsx(\"strong\",{children:team.name}),\" ? Cette action est irr\\xE9versible et retirera tous les membres de l'\\xE9quipe.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteConfirm(false),className:\"btn-secondary\",disabled:actionLoading,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteTeam,disabled:actionLoading,className:\"btn-danger flex items-center\",children:actionLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner w-4 h-4 mr-2\"}),\"Suppression...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4 mr-2\"}),\"Supprimer\"]})})]})]})}),memberToRemove&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-800 rounded-lg max-w-md w-full p-6 border border-red-500/30\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(UserMinusIcon,{className:\"w-8 h-8 text-red-400 mr-3\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Retirer le membre\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 mb-6\",children:[\"\\xCAtes-vous s\\xFBr de vouloir retirer \",/*#__PURE__*/_jsx(\"strong\",{children:memberToRemove.handle}),\" de l'\\xE9quipe ?\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMemberToRemove(null),className:\"btn-secondary\",disabled:actionLoading,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveMember(memberToRemove.user_id),disabled:actionLoading,className:\"btn-danger flex items-center\",children:actionLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner w-4 h-4 mr-2\"}),\"Retrait...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UserMinusIcon,{className:\"w-4 h-4 mr-2\"}),\"Retirer\"]})})]})]})})]});};export default TeamManagementPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","toast","UsersIcon","PencilIcon","TrashIcon","UserPlusIcon","UserMinusIcon","ExclamationTriangleIcon","ArrowLeftIcon","StarIcon","CalendarDaysIcon","TrophyIcon","CogIcon","tournamentService","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeamManagementPage","tournamentId","teamId","navigate","team","setTeam","tournament","setTournament","loading","setLoading","actionLoading","setActionLoading","editMode","setEditMode","teamName","setTeamName","showDeleteConfirm","setShowDeleteConfirm","memberToRemove","setMemberToRemove","showInviteModal","setShowInviteModal","inviteHandle","setInviteHandle","inviteMessage","setInviteMessage","teamInvitations","setTeamInvitations","activeTab","setActiveTab","user","isAuthenticated","loadTeamAndTournament","teamData","tournamentData","Promise","all","getTeamDetails","getTournament","name","can_manage","loadTeamInvitations","is_member","error","concat","console","invitations","getTeamInvitations","handleUpdateTeam","e","preventDefault","trim","updateTeam","success","_error$response","_error$response$data","response","data","detail","handleDeleteTeam","deleteTeam","_error$response2","_error$response2$data","handleRemoveMember","userId","removeTeamMember","_error$response3","_error$response3$data","handleLeaveTeam","leaveTeam","_error$response4","_error$response4$data","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","canEditTeam","state","canDeleteTeam","className","children","to","start_at_utc","onClick","onSubmit","type","value","onChange","target","placeholder","required","minLength","maxLength","disabled","seed","created_at","member_count","team_size","format","wins","points","members","length","map","member","avatar_url","src","alt","handle","is_captain","joined_at","title","user_id","team_count","max_teams"],"sources":["C:/Users/Knight-Server/Desktop/VerseLink-conflict_090925_1049/frontend/src/pages/TeamManagementPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { \n  UsersIcon,\n  PencilIcon,\n  TrashIcon,\n  UserPlusIcon,\n  UserMinusIcon,\n  ExclamationTriangleIcon,\n  ArrowLeftIcon,\n  StarIcon,\n  CalendarDaysIcon,\n  TrophyIcon,\n  CogIcon\n} from '@heroicons/react/24/outline';\nimport { tournamentService } from '../services/tournamentService';\nimport { useAuth } from '../App';\n\nconst TeamManagementPage = () => {\n  const { tournamentId, teamId } = useParams();\n  const navigate = useNavigate();\n  const [team, setTeam] = useState(null);\n  const [tournament, setTournament] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [actionLoading, setActionLoading] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [teamName, setTeamName] = useState('');\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [memberToRemove, setMemberToRemove] = useState(null);\n  const [showInviteModal, setShowInviteModal] = useState(false);\n  const [inviteHandle, setInviteHandle] = useState('');\n  const [inviteMessage, setInviteMessage] = useState('');\n  const [teamInvitations, setTeamInvitations] = useState([]);\n  const [activeTab, setActiveTab] = useState('members');\n  const { user, isAuthenticated } = useAuth();\n\n  useEffect(() => {\n    if (tournamentId && teamId) {\n      loadTeamAndTournament();\n    }\n  }, [tournamentId, teamId]);\n\n  const loadTeamAndTournament = async () => {\n    try {\n      setLoading(true);\n      const [teamData, tournamentData] = await Promise.all([\n        tournamentService.getTeamDetails(tournamentId, teamId),\n        tournamentService.getTournament(tournamentId)\n      ]);\n      \n      setTeam(teamData);\n      setTournament(tournamentData);\n      setTeamName(teamData.name);\n      \n      // Load team invitations if user is captain\n      if (teamData.can_manage) {\n        await loadTeamInvitations();\n      }\n      \n      // Check if user has permission to manage this team\n      if (!teamData.can_manage && !teamData.is_member) {\n        toast.error('Vous n\\'avez pas accès à cette équipe');\n        navigate(`/tournaments/${tournamentId}`);\n      }\n    } catch (error) {\n      console.error('Failed to load team:', error);\n      toast.error('Erreur lors du chargement de l\\'équipe');\n      navigate(`/tournaments/${tournamentId}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadTeamInvitations = async () => {\n    try {\n      const invitations = await tournamentService.getTeamInvitations(tournamentId, teamId);\n      setTeamInvitations(invitations);\n    } catch (error) {\n      console.error('Failed to load team invitations:', error);\n    }\n  };\n\n  const handleUpdateTeam = async (e) => {\n    e.preventDefault();\n    \n    if (!teamName.trim()) {\n      toast.error('Le nom de l\\'équipe est requis');\n      return;\n    }\n\n    try {\n      setActionLoading(true);\n      await tournamentService.updateTeam(tournamentId, teamId, { name: teamName.trim() });\n      toast.success('Équipe mise à jour avec succès !');\n      setEditMode(false);\n      await loadTeamAndTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error('Erreur lors de la mise à jour de l\\'équipe');\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleDeleteTeam = async () => {\n    try {\n      setActionLoading(true);\n      await tournamentService.deleteTeam(tournamentId, teamId);\n      toast.success('Équipe supprimée avec succès');\n      navigate(`/tournaments/${tournamentId}`);\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error('Erreur lors de la suppression de l\\'équipe');\n      }\n    } finally {\n      setActionLoading(false);\n      setShowDeleteConfirm(false);\n    }\n  };\n\n  const handleRemoveMember = async (userId) => {\n    try {\n      setActionLoading(true);\n      await tournamentService.removeTeamMember(tournamentId, teamId, userId);\n      toast.success('Membre retiré de l\\'équipe');\n      await loadTeamAndTournament();\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error('Erreur lors du retrait du membre');\n      }\n    } finally {\n      setActionLoading(false);\n      setMemberToRemove(null);\n    }\n  };\n\n  const handleLeaveTeam = async () => {\n    try {\n      setActionLoading(true);\n      await tournamentService.leaveTeam(tournamentId, teamId);\n      toast.success('Vous avez quitté l\\'équipe');\n      navigate(`/tournaments/${tournamentId}`);\n    } catch (error) {\n      if (error.response?.data?.detail) {\n        toast.error(error.response.data.detail);\n      } else {\n        toast.error('Erreur lors de la sortie de l\\'équipe');\n      }\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString('fr-FR', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const canEditTeam = () => {\n    return team?.can_manage && tournament?.state === 'open_registration';\n  };\n\n  const canDeleteTeam = () => {\n    return team?.can_manage && tournament?.state === 'open_registration';\n  };\n\n  if (loading || !team || !tournament) {\n    return (\n      <div className=\"min-h-screen bg-dark-950 flex items-center justify-center\">\n        <div className=\"loading-spinner w-12 h-12\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-dark-950 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"flex items-center mb-8\">\n          <Link \n            to={`/tournaments/${tournamentId}`}\n            className=\"flex items-center text-gray-400 hover:text-white mr-4\"\n          >\n            <ArrowLeftIcon className=\"w-5 h-5 mr-2\" />\n            Retour au tournoi\n          </Link>\n          <div className=\"flex items-center space-x-3\">\n            <CogIcon className=\"w-8 h-8 text-primary-400\" />\n            <h1 className=\"text-3xl font-bold text-white\">\n              Gestion d'équipe\n            </h1>\n          </div>\n        </div>\n\n        {/* Tournament Context */}\n        <div className=\"glass-effect rounded-lg p-4 mb-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-white\">{tournament.name}</h2>\n              <p className=\"text-gray-400 text-sm\">\n                {formatDate(tournament.start_at_utc)}\n              </p>\n            </div>\n            <div className=\"text-right\">\n              <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium text-white ${\n                tournament.state === 'open_registration' ? 'bg-green-600' :\n                tournament.state === 'registration_closed' ? 'bg-yellow-600' :\n                tournament.state === 'ongoing' ? 'bg-blue-600' :\n                'bg-gray-600'\n              }`}>\n                {tournament.state === 'open_registration' ? 'Inscriptions ouvertes' :\n                 tournament.state === 'registration_closed' ? 'Inscriptions fermées' :\n                 tournament.state === 'ongoing' ? 'En cours' :\n                 tournament.state}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          {/* Team Information */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"glass-effect rounded-xl p-6 mb-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-2xl font-bold text-white flex items-center\">\n                  <UsersIcon className=\"w-7 h-7 mr-3 text-primary-400\" />\n                  {editMode ? 'Modifier l\\'équipe' : 'Informations de l\\'équipe'}\n                </h3>\n                \n                {team.can_manage && canEditTeam() && !editMode && (\n                  <button\n                    onClick={() => setEditMode(true)}\n                    className=\"btn-secondary flex items-center\"\n                  >\n                    <PencilIcon className=\"w-4 h-4 mr-2\" />\n                    Modifier\n                  </button>\n                )}\n              </div>\n\n              {editMode ? (\n                <form onSubmit={handleUpdateTeam} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Nom de l'équipe\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={teamName}\n                      onChange={(e) => setTeamName(e.target.value)}\n                      className=\"input-primary w-full\"\n                      placeholder=\"Nom de l'équipe\"\n                      required\n                      minLength={2}\n                      maxLength={100}\n                    />\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-3 pt-4\">\n                    <button\n                      type=\"submit\"\n                      disabled={actionLoading}\n                      className=\"btn-primary flex items-center\"\n                    >\n                      {actionLoading ? 'Sauvegarde...' : 'Sauvegarder'}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setEditMode(false);\n                        setTeamName(team.name);\n                      }}\n                      className=\"btn-secondary\"\n                    >\n                      Annuler\n                    </button>\n                  </div>\n                </form>\n              ) : (\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"text-xl font-semibold text-white flex items-center\">\n                        {team.seed && (\n                          <span className=\"bg-primary-600 text-white text-sm rounded-full w-7 h-7 flex items-center justify-center mr-3 font-bold\">\n                            {team.seed}\n                          </span>\n                        )}\n                        {team.name}\n                      </h4>\n                      <p className=\"text-gray-400\">\n                        Équipe créée le {formatDate(team.created_at)}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"grid md:grid-cols-3 gap-4 mt-6\">\n                    <div className=\"bg-dark-700 rounded-lg p-4 border border-dark-600\">\n                      <div className=\"flex items-center\">\n                        <UsersIcon className=\"w-8 h-8 text-primary-400 mr-3\" />\n                        <div>\n                          <p className=\"text-2xl font-bold text-white\">{team.member_count}</p>\n                          <p className=\"text-sm text-gray-400\">\n                            Membres ({tournament.team_size} max)\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {tournament.format === 'rr' && (\n                      <>\n                        <div className=\"bg-dark-700 rounded-lg p-4 border border-dark-600\">\n                          <div className=\"flex items-center\">\n                            <TrophyIcon className=\"w-8 h-8 text-green-400 mr-3\" />\n                            <div>\n                              <p className=\"text-2xl font-bold text-white\">{team.wins}</p>\n                              <p className=\"text-sm text-gray-400\">Victoires</p>\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <div className=\"bg-dark-700 rounded-lg p-4 border border-dark-600\">\n                          <div className=\"flex items-center\">\n                            <StarIcon className=\"w-8 h-8 text-yellow-400 mr-3\" />\n                            <div>\n                              <p className=\"text-2xl font-bold text-white\">{team.points}</p>\n                              <p className=\"text-sm text-gray-400\">Points</p>\n                            </div>\n                          </div>\n                        </div>\n                      </>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Team Members */}\n            <div className=\"glass-effect rounded-xl p-6\">\n              <h3 className=\"text-xl font-bold text-white mb-6 flex items-center\">\n                <UsersIcon className=\"w-6 h-6 mr-3 text-primary-400\" />\n                Membres de l'équipe ({team.members.length})\n              </h3>\n\n              <div className=\"space-y-3\">\n                {team.members.map((member) => (\n                  <div key={member.user_id} className=\"flex items-center justify-between p-4 bg-dark-700 rounded-lg border border-dark-600\">\n                    <div className=\"flex items-center space-x-3\">\n                      {member.avatar_url ? (\n                        <img\n                          src={member.avatar_url}\n                          alt={member.handle}\n                          className=\"w-10 h-10 rounded-full\"\n                        />\n                      ) : (\n                        <div className=\"w-10 h-10 bg-dark-600 rounded-full flex items-center justify-center\">\n                          <UsersIcon className=\"w-5 h-5 text-gray-400\" />\n                        </div>\n                      )}\n                      \n                      <div>\n                        <div className=\"flex items-center space-x-2\">\n                          <h4 className=\"font-medium text-white\">{member.handle}</h4>\n                          {member.is_captain && (\n                            <span className=\"flex items-center text-xs bg-yellow-600 text-white px-2 py-1 rounded-full\">\n                              <StarIcon className=\"w-3 h-3 mr-1\" />\n                              Capitaine\n                            </span>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-400\">\n                          Rejoint le {formatDate(member.joined_at)}\n                        </p>\n                      </div>\n                    </div>\n\n                    {/* Member Actions */}\n                    {team.can_manage && !member.is_captain && canEditTeam() && (\n                      <button\n                        onClick={() => setMemberToRemove(member)}\n                        className=\"text-red-400 hover:text-red-300 p-2 rounded-lg hover:bg-red-900/20 transition-colors duration-200\"\n                        title=\"Retirer de l'équipe\"\n                      >\n                        <UserMinusIcon className=\"w-5 h-5\" />\n                      </button>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {team.member_count < tournament.team_size && canEditTeam() && (\n                <div className=\"mt-6 p-4 bg-dark-700 rounded-lg border border-dark-600 border-dashed\">\n                  <div className=\"text-center\">\n                    <UserPlusIcon className=\"w-12 h-12 text-gray-500 mx-auto mb-3\" />\n                    <p className=\"text-gray-400 mb-4\">\n                      Il reste {tournament.team_size - team.member_count} place(s) disponible(s)\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      Les joueurs peuvent rejoindre votre équipe depuis la page du tournoi\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Actions Panel */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"glass-effect rounded-xl p-6 mb-6\">\n              <h3 className=\"text-lg font-bold text-white mb-4\">Actions</h3>\n              \n              <div className=\"space-y-3\">\n                {/* Leave Team (non-captain) */}\n                {team.is_member && !team.can_manage && tournament.state === 'open_registration' && (\n                  <button\n                    onClick={handleLeaveTeam}\n                    disabled={actionLoading}\n                    className=\"w-full btn-danger flex items-center justify-center\"\n                  >\n                    <UserMinusIcon className=\"w-4 h-4 mr-2\" />\n                    Quitter l'équipe\n                  </button>\n                )}\n\n                {/* Delete Team (captain only) */}\n                {team.can_manage && canDeleteTeam() && (\n                  <button\n                    onClick={() => setShowDeleteConfirm(true)}\n                    disabled={actionLoading}\n                    className=\"w-full btn-danger flex items-center justify-center\"\n                  >\n                    <TrashIcon className=\"w-4 h-4 mr-2\" />\n                    Supprimer l'équipe\n                  </button>\n                )}\n              </div>\n              \n              {(!canEditTeam() && tournament.state !== 'open_registration') && (\n                <div className=\"mt-4 p-3 bg-yellow-900/20 border border-yellow-500/30 rounded-lg\">\n                  <div className=\"flex items-start\">\n                    <ExclamationTriangleIcon className=\"w-5 h-5 text-yellow-400 mr-2 mt-0.5\" />\n                    <p className=\"text-yellow-300 text-sm\">\n                      Les modifications ne sont plus possibles car les inscriptions sont fermées.\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Tournament Info */}\n            <div className=\"glass-effect rounded-xl p-6\">\n              <h3 className=\"text-lg font-bold text-white mb-4\">Informations du tournoi</h3>\n              \n              <div className=\"space-y-3 text-sm\">\n                <div className=\"flex items-center text-gray-300\">\n                  <CalendarDaysIcon className=\"w-4 h-4 mr-2 text-primary-400\" />\n                  <span>{formatDate(tournament.start_at_utc)}</span>\n                </div>\n                \n                <div className=\"flex items-center text-gray-300\">\n                  <UsersIcon className=\"w-4 h-4 mr-2 text-primary-400\" />\n                  <span>\n                    {tournament.team_count}/{tournament.max_teams} équipes\n                  </span>\n                </div>\n                \n                <div className=\"flex items-center text-gray-300\">\n                  <TrophyIcon className=\"w-4 h-4 mr-2 text-primary-400\" />\n                  <span>\n                    {tournament.format === 'se' ? 'Simple Élimination' :\n                     tournament.format === 'de' ? 'Double Élimination' :\n                     tournament.format === 'rr' ? 'Round Robin' :\n                     'Format personnalisé'}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Delete Team Confirmation Modal */}\n      {showDeleteConfirm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-dark-800 rounded-lg max-w-md w-full p-6 border border-red-500/30\">\n            <div className=\"flex items-center mb-4\">\n              <ExclamationTriangleIcon className=\"w-8 h-8 text-red-400 mr-3\" />\n              <h3 className=\"text-xl font-bold text-white\">Supprimer l'équipe</h3>\n            </div>\n            \n            <p className=\"text-gray-300 mb-6\">\n              Êtes-vous sûr de vouloir supprimer l'équipe <strong>{team.name}</strong> ? \n              Cette action est irréversible et retirera tous les membres de l'équipe.\n            </p>\n            \n            <div className=\"flex items-center justify-end space-x-3\">\n              <button\n                onClick={() => setShowDeleteConfirm(false)}\n                className=\"btn-secondary\"\n                disabled={actionLoading}\n              >\n                Annuler\n              </button>\n              <button\n                onClick={handleDeleteTeam}\n                disabled={actionLoading}\n                className=\"btn-danger flex items-center\"\n              >\n                {actionLoading ? (\n                  <>\n                    <div className=\"loading-spinner w-4 h-4 mr-2\"></div>\n                    Suppression...\n                  </>\n                ) : (\n                  <>\n                    <TrashIcon className=\"w-4 h-4 mr-2\" />\n                    Supprimer\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Remove Member Confirmation Modal */}\n      {memberToRemove && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-dark-800 rounded-lg max-w-md w-full p-6 border border-red-500/30\">\n            <div className=\"flex items-center mb-4\">\n              <UserMinusIcon className=\"w-8 h-8 text-red-400 mr-3\" />\n              <h3 className=\"text-xl font-bold text-white\">Retirer le membre</h3>\n            </div>\n            \n            <p className=\"text-gray-300 mb-6\">\n              Êtes-vous sûr de vouloir retirer <strong>{memberToRemove.handle}</strong> de l'équipe ?\n            </p>\n            \n            <div className=\"flex items-center justify-end space-x-3\">\n              <button\n                onClick={() => setMemberToRemove(null)}\n                className=\"btn-secondary\"\n                disabled={actionLoading}\n              >\n                Annuler\n              </button>\n              <button\n                onClick={() => handleRemoveMember(memberToRemove.user_id)}\n                disabled={actionLoading}\n                className=\"btn-danger flex items-center\"\n              >\n                {actionLoading ? (\n                  <>\n                    <div className=\"loading-spinner w-4 h-4 mr-2\"></div>\n                    Retrait...\n                  </>\n                ) : (\n                  <>\n                    <UserMinusIcon className=\"w-4 h-4 mr-2\" />\n                    Retirer\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TeamManagementPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}