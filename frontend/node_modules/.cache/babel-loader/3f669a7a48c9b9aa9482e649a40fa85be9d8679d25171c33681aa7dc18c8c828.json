{"ast":null,"code":"import _objectSpread from\"C:/Users/Knight-Server/Desktop/VerseLink-Xapollo/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{toast}from'react-hot-toast';import{PencilIcon,PhotoIcon,UsersIcon,TrashIcon,ArrowRightOnRectangleIcon,ExclamationTriangleIcon,CheckCircleIcon,XMarkIcon}from'@heroicons/react/24/outline';import{organizationService}from'../services/organizationService';import{useAuth}from'../App';import{getMediaUrl}from'../utils/media';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageOrganizationPage=()=>{var _members$find,_members$find2;const{id}=useParams();const navigate=useNavigate();const{user}=useAuth();const[organization,setOrganization]=useState(null);const[members,setMembers]=useState([]);const[joinRequests,setJoinRequests]=useState([]);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('profile');const[showDeleteModal,setShowDeleteModal]=useState(false);const[showTransferModal,setShowTransferModal]=useState(false);const[selectedNewOwner,setSelectedNewOwner]=useState('');// Form states\nconst[profileForm,setProfileForm]=useState({name:'',description:'',website_url:'',discord_url:'',twitter_url:'',youtube_url:'',twitch_url:'',visibility:'public',membership_policy:'open'});useEffect(()=>{if(id){loadData();}},[id]);const loadData=async()=>{try{setLoading(true);const[orgData,membersData]=await Promise.all([organizationService.getOrganization(id),organizationService.getMembers(id)]);setOrganization(orgData);setMembers(membersData);// Initialize form with current data\nsetProfileForm({name:orgData.name||'',description:orgData.description||'',website_url:orgData.website_url||'',discord_url:orgData.discord_url||'',twitter_url:orgData.twitter_url||'',youtube_url:orgData.youtube_url||'',twitch_url:orgData.twitch_url||'',visibility:orgData.visibility||'public',membership_policy:orgData.membership_policy||'open'});// Load join requests if needed\nif(orgData.membership_policy==='request_only'){loadJoinRequests();}}catch(error){console.error('Failed to load organization data:',error);toast.error('Erreur lors du chargement des données');}finally{setLoading(false);}};const loadJoinRequests=async()=>{try{const requests=await organizationService.getJoinRequests(id);setJoinRequests(requests);}catch(error){console.error('Failed to load join requests:',error);}};const handleProfileUpdate=async e=>{e.preventDefault();try{const updatedOrg=await organizationService.updateOrganization(id,profileForm);setOrganization(updatedOrg);toast.success('Profil mis à jour');}catch(error){console.error('Failed to update organization:',error);toast.error('Erreur lors de la mise à jour');}};const handleJoinRequestAction=async(requestId,action)=>{try{await organizationService.processJoinRequest(id,requestId,action);toast.success(action==='accepted'?'Demande acceptée':'Demande refusée');loadJoinRequests();if(action==='accepted'){loadData();// Refresh member count\n}}catch(error){console.error('Failed to process join request:',error);toast.error('Erreur lors du traitement de la demande');}};const handleMemberRoleChange=async(memberId,newRole)=>{try{await organizationService.updateMemberRole(id,memberId,newRole);toast.success('Rôle mis à jour');loadData();}catch(error){console.error('Failed to update member role:',error);toast.error('Erreur lors de la mise à jour du rôle');}};const handleRemoveMember=async memberId=>{if(!window.confirm('Êtes-vous sûr de vouloir retirer ce membre ?')){return;}try{await organizationService.removeMember(id,memberId);toast.success('Membre retiré');loadData();}catch(error){console.error('Failed to remove member:',error);toast.error('Erreur lors du retrait du membre');}};const handleTransferOwnership=async()=>{if(!selectedNewOwner)return;try{await organizationService.transferOwnership(id,selectedNewOwner);toast.success('Propriété transférée');setShowTransferModal(false);navigate(\"/organizations/\".concat(id));}catch(error){console.error('Failed to transfer ownership:',error);toast.error('Erreur lors du transfert de propriété');}};const handleDeleteOrganization=async()=>{try{await organizationService.deleteOrganization(id);toast.success('Organisation supprimée');setShowDeleteModal(false);navigate('/organizations');}catch(error){console.error('Failed to delete organization:',error);toast.error('Erreur lors de la suppression');}};const handleLogoUpload=async e=>{const file=e.target.files[0];if(!file)return;// Validate file size (10MB limit)\nif(file.size>10*1024*1024){toast.error('Le fichier ne doit pas dépasser 10MB');return;}// Validate file type\nif(!file.type.startsWith('image/')){toast.error('Seules les images sont acceptées');return;}try{const response=await organizationService.uploadLogo(id,file);toast.success('Logo téléchargé avec succès');// Refresh organization data\nloadData();}catch(error){console.error('Failed to upload logo:',error);toast.error('Erreur lors du téléchargement du logo');}};const handleBannerUpload=async e=>{const file=e.target.files[0];if(!file)return;// Validate file size (10MB limit)\nif(file.size>10*1024*1024){toast.error('Le fichier ne doit pas dépasser 10MB');return;}// Validate file type\nif(!file.type.startsWith('image/')){toast.error('Seules les images sont acceptées');return;}try{const response=await organizationService.uploadBanner(id,file);toast.success('Bannière téléchargée avec succès');// Refresh organization data\nloadData();}catch(error){console.error('Failed to upload banner:',error);toast.error('Erreur lors du téléchargement de la bannière');}};const isOwner=user&&organization&&user.id===organization.owner_id;const isAdmin=((_members$find=members.find(m=>m.user_id===(user===null||user===void 0?void 0:user.id)))===null||_members$find===void 0?void 0:_members$find.role)==='admin'||isOwner;const isModerator=((_members$find2=members.find(m=>m.user_id===(user===null||user===void 0?void 0:user.id)))===null||_members$find2===void 0?void 0:_members$find2.role)==='moderator'||isAdmin;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner w-12 h-12\"})});}if(!organization){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white mb-4\",children:\"Organisation non trouv\\xE9e\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/organizations'),className:\"btn-primary\",children:\"Retour aux organisations\"})]})});}if(!isModerator){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"w-16 h-16 text-red-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white mb-4\",children:\"Acc\\xE8s refus\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mb-8\",children:\"Vous n'avez pas les permissions pour g\\xE9rer cette organisation.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/organizations/\".concat(id)),className:\"btn-primary\",children:\"Voir l'organisation\"})]})});}const tabs=[{id:'profile',name:'Profil',icon:PencilIcon,visible:isAdmin},{id:'media',name:'Médias',icon:PhotoIcon,visible:isAdmin},{id:'members',name:'Membres',icon:UsersIcon,visible:isModerator},{id:'requests',name:'Demandes',icon:CheckCircleIcon,visible:isModerator&&organization.membership_policy==='request_only'},{id:'danger',name:'Zone de danger',icon:ExclamationTriangleIcon,visible:isOwner}].filter(tab=>tab.visible);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-950 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"glass-effect rounded-2xl p-8 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-4xl font-bold text-white mb-2\",children:[\"G\\xE9rer \",organization.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Administrez votre organisation et ses membres\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/organizations/\".concat(id)),className:\"btn-ghost\",children:\"Voir l'organisation\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-dark-600 mb-8\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"-mb-px flex space-x-8\",children:tabs.map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"flex items-center py-2 px-1 border-b-2 font-medium text-sm \".concat(activeTab===tab.id?'border-primary-500 text-primary-400':'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(tab.icon,{className:\"w-5 h-5 mr-2\"}),tab.name,tab.id==='requests'&&joinRequests.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 bg-primary-500 text-white text-xs rounded-full px-2 py-1\",children:joinRequests.length})]},tab.id))})}),activeTab==='profile'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Informations du profil\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleProfileUpdate,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Nom de l'organisation *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profileForm.name,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{name:e.target.value})),className:\"input-primary w-full\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Visibilit\\xE9\"}),/*#__PURE__*/_jsxs(\"select\",{value:profileForm.visibility,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{visibility:e.target.value})),className:\"input-primary w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"public\",children:\"Publique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"unlisted\",children:\"Non list\\xE9e\"}),/*#__PURE__*/_jsx(\"option\",{value:\"private\",children:\"Priv\\xE9e\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Politique d'adh\\xE9sion\"}),/*#__PURE__*/_jsxs(\"select\",{value:profileForm.membership_policy,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{membership_policy:e.target.value})),className:\"input-primary w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"open\",children:\"Ouverte\"}),/*#__PURE__*/_jsx(\"option\",{value:\"request_only\",children:\"Sur demande\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:profileForm.description,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{description:e.target.value})),className:\"input-primary w-full\",rows:\"4\",placeholder:\"D\\xE9crivez votre organisation...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Site web\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:profileForm.website_url,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{website_url:e.target.value})),className:\"input-primary w-full\",placeholder:\"https://example.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Discord\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:profileForm.discord_url,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{discord_url:e.target.value})),className:\"input-primary w-full\",placeholder:\"https://discord.gg/...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Twitter\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:profileForm.twitter_url,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{twitter_url:e.target.value})),className:\"input-primary w-full\",placeholder:\"https://twitter.com/...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"YouTube\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:profileForm.youtube_url,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{youtube_url:e.target.value})),className:\"input-primary w-full\",placeholder:\"https://youtube.com/...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Twitch\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:profileForm.twitch_url,onChange:e=>setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{twitch_url:e.target.value})),className:\"input-primary w-full\",placeholder:\"https://twitch.tv/...\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"Sauvegarder les modifications\"})})]})]}),activeTab==='media'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Gestion des m\\xE9dias\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white mb-4\",children:\"Logo de l'organisation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[organization.logo_url?/*#__PURE__*/_jsx(\"img\",{src:getMediaUrl(organization.logo_url),alt:\"Logo\",className:\"w-20 h-20 rounded-lg object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-dark-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(PhotoIcon,{className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleLogoUpload,className:\"hidden\",id:\"logo-upload\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"logo-upload\",className:\"btn-secondary cursor-pointer\",children:organization.logo_url?'Changer le logo':'Ajouter un logo'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Format recommand\\xE9: PNG, JPG (max 10MB)\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white mb-4\",children:\"Banni\\xE8re de l'organisation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[organization.banner_url?/*#__PURE__*/_jsx(\"img\",{src:getMediaUrl(organization.banner_url),alt:\"Banni\\xE8re\",className:\"w-full h-48 rounded-lg object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48 bg-dark-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(PhotoIcon,{className:\"w-12 h-12 text-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleBannerUpload,className:\"hidden\",id:\"banner-upload\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"banner-upload\",className:\"btn-secondary cursor-pointer\",children:organization.banner_url?'Changer la bannière':'Ajouter une bannière'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Format recommand\\xE9: PNG, JPG, ratio 16:9 (max 10MB)\"})]})]})]})]})]}),activeTab==='members'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white mb-6\",children:[\"Gestion des membres (\",members.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:members.map(member=>{const isOrgOwner=member.user_id===organization.owner_id;return/*#__PURE__*/_jsx(\"div\",{className:\"glass-effect rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[member.avatar_url?/*#__PURE__*/_jsx(\"img\",{src:member.avatar_url,alt:member.handle,className:\"w-12 h-12 rounded-full mr-4\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center mr-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold\",children:member.handle.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-white font-semibold\",children:member.handle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:member.discord_username})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[!isOrgOwner&&isAdmin&&/*#__PURE__*/_jsxs(\"select\",{value:member.role,onChange:e=>handleMemberRoleChange(member.user_id,e.target.value),className:\"input-primary text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"member\",children:\"Membre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"moderator\",children:\"Mod\\xE9rateur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Administrateur\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-medium \".concat(isOrgOwner?'bg-purple-100 text-purple-800':member.role==='admin'?'bg-red-100 text-red-800':member.role==='moderator'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'),children:isOrgOwner?'Propriétaire':member.role==='admin'?'Admin':member.role==='moderator'?'Modérateur':'Membre'}),!isOrgOwner&&isAdmin&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveMember(member.user_id),className:\"text-red-400 hover:text-red-300 p-2\",title:\"Retirer le membre\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-5 h-5\"})})]})]})},member.user_id);})})]}),activeTab==='requests'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white mb-6\",children:[\"Demandes d'adh\\xE9sion (\",joinRequests.length,\")\"]}),joinRequests.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:joinRequests.map(request=>/*#__PURE__*/_jsx(\"div\",{className:\"glass-effect rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[request.user_avatar_url?/*#__PURE__*/_jsx(\"img\",{src:request.user_avatar_url,alt:request.user_handle,className:\"w-12 h-12 rounded-full mr-4\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center mr-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold\",children:request.user_handle.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-white font-semibold\",children:request.user_handle}),request.message&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-sm mt-1\",children:request.message}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-xs mt-1\",children:[\"Demand\\xE9 le \",new Date(request.created_at).toLocaleDateString('fr-FR')]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleJoinRequestAction(request.id,'accepted'),className:\"btn-primary text-sm\",children:\"Accepter\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleJoinRequestAction(request.id,'rejected'),className:\"btn-ghost text-red-400 hover:text-red-300 text-sm\",children:\"Refuser\"})]})]})},request.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"w-16 h-16 text-gray-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Aucune demande d'adh\\xE9sion en attente\"})]})]}),activeTab==='danger'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Zone de danger\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border border-yellow-600 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-400 mb-2\",children:\"Transf\\xE9rer la propri\\xE9t\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 mb-4\",children:\"Transf\\xE9rez d\\xE9finitivement la propri\\xE9t\\xE9 de cette organisation \\xE0 un autre membre.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTransferModal(true),className:\"btn-secondary text-yellow-400 border-yellow-400 hover:bg-yellow-400 hover:text-dark-900\",children:[/*#__PURE__*/_jsx(ArrowRightOnRectangleIcon,{className:\"w-5 h-5 mr-2\"}),\"Transf\\xE9rer la propri\\xE9t\\xE9\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-red-600 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-400 mb-2\",children:\"Supprimer l'organisation\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 mb-4\",children:\"Supprimez d\\xE9finitivement cette organisation. Cette action est irr\\xE9versible.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowDeleteModal(true),className:\"btn-secondary text-red-400 border-red-400 hover:bg-red-400 hover:text-white\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"w-5 h-5 mr-2\"}),\"Supprimer l'organisation\"]})]})]})]})]}),showTransferModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-800 rounded-lg p-6 max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white mb-4\",children:\"Transf\\xE9rer la propri\\xE9t\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 mb-6\",children:\"S\\xE9lectionnez le nouveau propri\\xE9taire de cette organisation. Cette action est irr\\xE9versible.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Nouveau propri\\xE9taire\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedNewOwner,onChange:e=>setSelectedNewOwner(e.target.value),className:\"input-primary w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner un membre...\"}),members.filter(m=>m.user_id!==user.id).map(member=>/*#__PURE__*/_jsxs(\"option\",{value:member.user_id,children:[member.handle,\" (\",member.role,\")\"]},member.user_id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(false),className:\"btn-ghost flex-1\",children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTransferOwnership,disabled:!selectedNewOwner,className:\"btn-primary flex-1 bg-yellow-600 hover:bg-yellow-700\",children:\"Confirmer le transfert\"})]})]})}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-800 rounded-lg p-6 max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"w-8 h-8 text-red-400 mr-3\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Supprimer l'organisation\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 mb-6\",children:[\"\\xCAtes-vous absolument s\\xFBr de vouloir supprimer \",/*#__PURE__*/_jsx(\"strong\",{children:organization.name}),\" ? Cette action supprimera d\\xE9finitivement l'organisation, tous ses membres, \\xE9v\\xE9nements et donn\\xE9es associ\\xE9es. Cette action est \",/*#__PURE__*/_jsx(\"strong\",{children:\"irr\\xE9versible\"}),\".\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteModal(false),className:\"btn-ghost flex-1\",children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteOrganization,className:\"btn-primary flex-1 bg-red-600 hover:bg-red-700\",children:\"Oui, supprimer d\\xE9finitivement\"})]})]})})]})});};export default ManageOrganizationPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","toast","PencilIcon","PhotoIcon","UsersIcon","TrashIcon","ArrowRightOnRectangleIcon","ExclamationTriangleIcon","CheckCircleIcon","XMarkIcon","organizationService","useAuth","getMediaUrl","jsx","_jsx","jsxs","_jsxs","ManageOrganizationPage","_members$find","_members$find2","id","navigate","user","organization","setOrganization","members","setMembers","joinRequests","setJoinRequests","loading","setLoading","activeTab","setActiveTab","showDeleteModal","setShowDeleteModal","showTransferModal","setShowTransferModal","selectedNewOwner","setSelectedNewOwner","profileForm","setProfileForm","name","description","website_url","discord_url","twitter_url","youtube_url","twitch_url","visibility","membership_policy","loadData","orgData","membersData","Promise","all","getOrganization","getMembers","loadJoinRequests","error","console","requests","getJoinRequests","handleProfileUpdate","e","preventDefault","updatedOrg","updateOrganization","success","handleJoinRequestAction","requestId","action","processJoinRequest","handleMemberRoleChange","memberId","newRole","updateMemberRole","handleRemoveMember","window","confirm","removeMember","handleTransferOwnership","transferOwnership","concat","handleDeleteOrganization","deleteOrganization","handleLogoUpload","file","target","files","size","type","startsWith","response","uploadLogo","handleBannerUpload","uploadBanner","isOwner","owner_id","isAdmin","find","m","user_id","role","isModerator","className","children","onClick","tabs","icon","visible","filter","tab","map","length","onSubmit","value","onChange","_objectSpread","required","rows","placeholder","logo_url","src","alt","accept","htmlFor","banner_url","member","isOrgOwner","avatar_url","handle","charAt","toUpperCase","discord_username","title","request","user_avatar_url","user_handle","message","Date","created_at","toLocaleDateString","disabled"],"sources":["C:/Users/Knight-Server/Desktop/VerseLink-Xapollo/frontend/src/pages/ManageOrganizationPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport {\n  PencilIcon,\n  PhotoIcon,\n  UsersIcon,\n  TrashIcon,\n  ArrowRightOnRectangleIcon,\n  ExclamationTriangleIcon,\n  CheckCircleIcon,\n  XMarkIcon\n} from '@heroicons/react/24/outline';\nimport { organizationService } from '../services/organizationService';\nimport { useAuth } from '../App';\nimport { getMediaUrl } from '../utils/media';\n\nconst ManageOrganizationPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  \n  const [organization, setOrganization] = useState(null);\n  const [members, setMembers] = useState([]);\n  const [joinRequests, setJoinRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('profile');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showTransferModal, setShowTransferModal] = useState(false);\n  const [selectedNewOwner, setSelectedNewOwner] = useState('');\n  \n  // Form states\n  const [profileForm, setProfileForm] = useState({\n    name: '',\n    description: '',\n    website_url: '',\n    discord_url: '',\n    twitter_url: '',\n    youtube_url: '',\n    twitch_url: '',\n    visibility: 'public',\n    membership_policy: 'open'\n  });\n\n  useEffect(() => {\n    if (id) {\n      loadData();\n    }\n  }, [id]);\n\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      const [orgData, membersData] = await Promise.all([\n        organizationService.getOrganization(id),\n        organizationService.getMembers(id)\n      ]);\n      \n      setOrganization(orgData);\n      setMembers(membersData);\n      \n      // Initialize form with current data\n      setProfileForm({\n        name: orgData.name || '',\n        description: orgData.description || '',\n        website_url: orgData.website_url || '',\n        discord_url: orgData.discord_url || '',\n        twitter_url: orgData.twitter_url || '',\n        youtube_url: orgData.youtube_url || '',\n        twitch_url: orgData.twitch_url || '',\n        visibility: orgData.visibility || 'public',\n        membership_policy: orgData.membership_policy || 'open'\n      });\n      \n      // Load join requests if needed\n      if (orgData.membership_policy === 'request_only') {\n        loadJoinRequests();\n      }\n    } catch (error) {\n      console.error('Failed to load organization data:', error);\n      toast.error('Erreur lors du chargement des données');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadJoinRequests = async () => {\n    try {\n      const requests = await organizationService.getJoinRequests(id);\n      setJoinRequests(requests);\n    } catch (error) {\n      console.error('Failed to load join requests:', error);\n    }\n  };\n\n  const handleProfileUpdate = async (e) => {\n    e.preventDefault();\n    try {\n      const updatedOrg = await organizationService.updateOrganization(id, profileForm);\n      setOrganization(updatedOrg);\n      toast.success('Profil mis à jour');\n    } catch (error) {\n      console.error('Failed to update organization:', error);\n      toast.error('Erreur lors de la mise à jour');\n    }\n  };\n\n  const handleJoinRequestAction = async (requestId, action) => {\n    try {\n      await organizationService.processJoinRequest(id, requestId, action);\n      toast.success(action === 'accepted' ? 'Demande acceptée' : 'Demande refusée');\n      loadJoinRequests();\n      if (action === 'accepted') {\n        loadData(); // Refresh member count\n      }\n    } catch (error) {\n      console.error('Failed to process join request:', error);\n      toast.error('Erreur lors du traitement de la demande');\n    }\n  };\n\n  const handleMemberRoleChange = async (memberId, newRole) => {\n    try {\n      await organizationService.updateMemberRole(id, memberId, newRole);\n      toast.success('Rôle mis à jour');\n      loadData();\n    } catch (error) {\n      console.error('Failed to update member role:', error);\n      toast.error('Erreur lors de la mise à jour du rôle');\n    }\n  };\n\n  const handleRemoveMember = async (memberId) => {\n    if (!window.confirm('Êtes-vous sûr de vouloir retirer ce membre ?')) {\n      return;\n    }\n    \n    try {\n      await organizationService.removeMember(id, memberId);\n      toast.success('Membre retiré');\n      loadData();\n    } catch (error) {\n      console.error('Failed to remove member:', error);\n      toast.error('Erreur lors du retrait du membre');\n    }\n  };\n\n  const handleTransferOwnership = async () => {\n    if (!selectedNewOwner) return;\n    \n    try {\n      await organizationService.transferOwnership(id, selectedNewOwner);\n      toast.success('Propriété transférée');\n      setShowTransferModal(false);\n      navigate(`/organizations/${id}`);\n    } catch (error) {\n      console.error('Failed to transfer ownership:', error);\n      toast.error('Erreur lors du transfert de propriété');\n    }\n  };\n\n  const handleDeleteOrganization = async () => {\n    try {\n      await organizationService.deleteOrganization(id);\n      toast.success('Organisation supprimée');\n      setShowDeleteModal(false);\n      navigate('/organizations');\n    } catch (error) {\n      console.error('Failed to delete organization:', error);\n      toast.error('Erreur lors de la suppression');\n    }\n  };\n\n  const handleLogoUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file size (10MB limit)\n    if (file.size > 10 * 1024 * 1024) {\n      toast.error('Le fichier ne doit pas dépasser 10MB');\n      return;\n    }\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      toast.error('Seules les images sont acceptées');\n      return;\n    }\n\n    try {\n      const response = await organizationService.uploadLogo(id, file);\n      toast.success('Logo téléchargé avec succès');\n      // Refresh organization data\n      loadData();\n    } catch (error) {\n      console.error('Failed to upload logo:', error);\n      toast.error('Erreur lors du téléchargement du logo');\n    }\n  };\n\n  const handleBannerUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file size (10MB limit)\n    if (file.size > 10 * 1024 * 1024) {\n      toast.error('Le fichier ne doit pas dépasser 10MB');\n      return;\n    }\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      toast.error('Seules les images sont acceptées');\n      return;\n    }\n\n    try {\n      const response = await organizationService.uploadBanner(id, file);\n      toast.success('Bannière téléchargée avec succès');\n      // Refresh organization data\n      loadData();\n    } catch (error) {\n      console.error('Failed to upload banner:', error);\n      toast.error('Erreur lors du téléchargement de la bannière');\n    }\n  };\n\n  const isOwner = user && organization && user.id === organization.owner_id;\n  const isAdmin = members.find(m => m.user_id === user?.id)?.role === 'admin' || isOwner;\n  const isModerator = members.find(m => m.user_id === user?.id)?.role === 'moderator' || isAdmin;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-dark-950 flex items-center justify-center\">\n        <div className=\"loading-spinner w-12 h-12\"></div>\n      </div>\n    );\n  }\n\n  if (!organization) {\n    return (\n      <div className=\"min-h-screen bg-dark-950 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-white mb-4\">Organisation non trouvée</h1>\n          <button onClick={() => navigate('/organizations')} className=\"btn-primary\">\n            Retour aux organisations\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isModerator) {\n    return (\n      <div className=\"min-h-screen bg-dark-950 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <ExclamationTriangleIcon className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\n          <h1 className=\"text-2xl font-bold text-white mb-4\">Accès refusé</h1>\n          <p className=\"text-gray-400 mb-8\">Vous n'avez pas les permissions pour gérer cette organisation.</p>\n          <button onClick={() => navigate(`/organizations/${id}`)} className=\"btn-primary\">\n            Voir l'organisation\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const tabs = [\n    { id: 'profile', name: 'Profil', icon: PencilIcon, visible: isAdmin },\n    { id: 'media', name: 'Médias', icon: PhotoIcon, visible: isAdmin },\n    { id: 'members', name: 'Membres', icon: UsersIcon, visible: isModerator },\n    { id: 'requests', name: 'Demandes', icon: CheckCircleIcon, visible: isModerator && organization.membership_policy === 'request_only' },\n    { id: 'danger', name: 'Zone de danger', icon: ExclamationTriangleIcon, visible: isOwner }\n  ].filter(tab => tab.visible);\n\n  return (\n    <div className=\"min-h-screen bg-dark-950 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"glass-effect rounded-2xl p-8 mb-8\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-4xl font-bold text-white mb-2\">\n                Gérer {organization.name}\n              </h1>\n              <p className=\"text-gray-400\">\n                Administrez votre organisation et ses membres\n              </p>\n            </div>\n            <button\n              onClick={() => navigate(`/organizations/${id}`)}\n              className=\"btn-ghost\"\n            >\n              Voir l'organisation\n            </button>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"card p-6 mb-8\">\n          <div className=\"border-b border-dark-600 mb-8\">\n            <nav className=\"-mb-px flex space-x-8\">\n              {tabs.map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${\n                    activeTab === tab.id\n                      ? 'border-primary-500 text-primary-400'\n                      : 'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300'\n                  }`}\n                >\n                  <tab.icon className=\"w-5 h-5 mr-2\" />\n                  {tab.name}\n                  {tab.id === 'requests' && joinRequests.length > 0 && (\n                    <span className=\"ml-2 bg-primary-500 text-white text-xs rounded-full px-2 py-1\">\n                      {joinRequests.length}\n                    </span>\n                  )}\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Tab Content */}\n          {activeTab === 'profile' && (\n            <div>\n              <h2 className=\"text-2xl font-bold text-white mb-6\">Informations du profil</h2>\n              <form onSubmit={handleProfileUpdate} className=\"space-y-6\">\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Nom de l'organisation *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={profileForm.name}\n                      onChange={(e) => setProfileForm({...profileForm, name: e.target.value})}\n                      className=\"input-primary w-full\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Visibilité\n                    </label>\n                    <select\n                      value={profileForm.visibility}\n                      onChange={(e) => setProfileForm({...profileForm, visibility: e.target.value})}\n                      className=\"input-primary w-full\"\n                    >\n                      <option value=\"public\">Publique</option>\n                      <option value=\"unlisted\">Non listée</option>\n                      <option value=\"private\">Privée</option>\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Politique d'adhésion\n                    </label>\n                    <select\n                      value={profileForm.membership_policy}\n                      onChange={(e) => setProfileForm({...profileForm, membership_policy: e.target.value})}\n                      className=\"input-primary w-full\"\n                    >\n                      <option value=\"open\">Ouverte</option>\n                      <option value=\"request_only\">Sur demande</option>\n                    </select>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                    Description\n                  </label>\n                  <textarea\n                    value={profileForm.description}\n                    onChange={(e) => setProfileForm({...profileForm, description: e.target.value})}\n                    className=\"input-primary w-full\"\n                    rows=\"4\"\n                    placeholder=\"Décrivez votre organisation...\"\n                  />\n                </div>\n                \n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Site web\n                    </label>\n                    <input\n                      type=\"url\"\n                      value={profileForm.website_url}\n                      onChange={(e) => setProfileForm({...profileForm, website_url: e.target.value})}\n                      className=\"input-primary w-full\"\n                      placeholder=\"https://example.com\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Discord\n                    </label>\n                    <input\n                      type=\"url\"\n                      value={profileForm.discord_url}\n                      onChange={(e) => setProfileForm({...profileForm, discord_url: e.target.value})}\n                      className=\"input-primary w-full\"\n                      placeholder=\"https://discord.gg/...\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Twitter\n                    </label>\n                    <input\n                      type=\"url\"\n                      value={profileForm.twitter_url}\n                      onChange={(e) => setProfileForm({...profileForm, twitter_url: e.target.value})}\n                      className=\"input-primary w-full\"\n                      placeholder=\"https://twitter.com/...\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      YouTube\n                    </label>\n                    <input\n                      type=\"url\"\n                      value={profileForm.youtube_url}\n                      onChange={(e) => setProfileForm({...profileForm, youtube_url: e.target.value})}\n                      className=\"input-primary w-full\"\n                      placeholder=\"https://youtube.com/...\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Twitch\n                    </label>\n                    <input\n                      type=\"url\"\n                      value={profileForm.twitch_url}\n                      onChange={(e) => setProfileForm({...profileForm, twitch_url: e.target.value})}\n                      className=\"input-primary w-full\"\n                      placeholder=\"https://twitch.tv/...\"\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"flex justify-end\">\n                  <button type=\"submit\" className=\"btn-primary\">\n                    Sauvegarder les modifications\n                  </button>\n                </div>\n              </form>\n            </div>\n          )}\n\n          {activeTab === 'media' && (\n            <div>\n              <h2 className=\"text-2xl font-bold text-white mb-6\">Gestion des médias</h2>\n              <div className=\"space-y-8\">\n                {/* Logo */}\n                <div>\n                  <h3 className=\"text-lg font-semibold text-white mb-4\">Logo de l'organisation</h3>\n                  <div className=\"flex items-center space-x-6\">\n                    {organization.logo_url ? (\n                      <img\n                        src={getMediaUrl(organization.logo_url)}\n                        alt=\"Logo\"\n                        className=\"w-20 h-20 rounded-lg object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-20 h-20 bg-dark-600 rounded-lg flex items-center justify-center\">\n                        <PhotoIcon className=\"w-8 h-8 text-gray-400\" />\n                      </div>\n                    )}\n                    <div>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleLogoUpload}\n                        className=\"hidden\"\n                        id=\"logo-upload\"\n                      />\n                      <label htmlFor=\"logo-upload\" className=\"btn-secondary cursor-pointer\">\n                        {organization.logo_url ? 'Changer le logo' : 'Ajouter un logo'}\n                      </label>\n                      <p className=\"text-sm text-gray-400 mt-2\">\n                        Format recommandé: PNG, JPG (max 10MB)\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Banner */}\n                <div>\n                  <h3 className=\"text-lg font-semibold text-white mb-4\">Bannière de l'organisation</h3>\n                  <div className=\"space-y-4\">\n                    {organization.banner_url ? (\n                      <img\n                        src={getMediaUrl(organization.banner_url)}\n                        alt=\"Bannière\"\n                        className=\"w-full h-48 rounded-lg object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-48 bg-dark-600 rounded-lg flex items-center justify-center\">\n                        <PhotoIcon className=\"w-12 h-12 text-gray-400\" />\n                      </div>\n                    )}\n                    <div>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleBannerUpload}\n                        className=\"hidden\"\n                        id=\"banner-upload\"\n                      />\n                      <label htmlFor=\"banner-upload\" className=\"btn-secondary cursor-pointer\">\n                        {organization.banner_url ? 'Changer la bannière' : 'Ajouter une bannière'}\n                      </label>\n                      <p className=\"text-sm text-gray-400 mt-2\">\n                        Format recommandé: PNG, JPG, ratio 16:9 (max 10MB)\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'members' && (\n            <div>\n              <h2 className=\"text-2xl font-bold text-white mb-6\">\n                Gestion des membres ({members.length})\n              </h2>\n              <div className=\"space-y-4\">\n                {members.map((member) => {\n                  const isOrgOwner = member.user_id === organization.owner_id;\n                  return (\n                    <div key={member.user_id} className=\"glass-effect rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center\">\n                          {member.avatar_url ? (\n                            <img\n                              src={member.avatar_url}\n                              alt={member.handle}\n                              className=\"w-12 h-12 rounded-full mr-4\"\n                            />\n                          ) : (\n                            <div className=\"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center mr-4\">\n                              <span className=\"text-white font-bold\">\n                                {member.handle.charAt(0).toUpperCase()}\n                              </span>\n                            </div>\n                          )}\n                          <div>\n                            <h4 className=\"text-white font-semibold\">{member.handle}</h4>\n                            <p className=\"text-gray-400 text-sm\">{member.discord_username}</p>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center space-x-4\">\n                          {!isOrgOwner && isAdmin && (\n                            <select\n                              value={member.role}\n                              onChange={(e) => handleMemberRoleChange(member.user_id, e.target.value)}\n                              className=\"input-primary text-sm\"\n                            >\n                              <option value=\"member\">Membre</option>\n                              <option value=\"moderator\">Modérateur</option>\n                              <option value=\"admin\">Administrateur</option>\n                            </select>\n                          )}\n                          \n                          <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                            isOrgOwner\n                              ? 'bg-purple-100 text-purple-800'\n                              : member.role === 'admin'\n                              ? 'bg-red-100 text-red-800'\n                              : member.role === 'moderator'\n                              ? 'bg-yellow-100 text-yellow-800'\n                              : 'bg-green-100 text-green-800'\n                          }`}>\n                            {isOrgOwner ? 'Propriétaire' : \n                             member.role === 'admin' ? 'Admin' :\n                             member.role === 'moderator' ? 'Modérateur' : 'Membre'}\n                          </span>\n\n                          {!isOrgOwner && isAdmin && (\n                            <button\n                              onClick={() => handleRemoveMember(member.user_id)}\n                              className=\"text-red-400 hover:text-red-300 p-2\"\n                              title=\"Retirer le membre\"\n                            >\n                              <XMarkIcon className=\"w-5 h-5\" />\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'requests' && (\n            <div>\n              <h2 className=\"text-2xl font-bold text-white mb-6\">\n                Demandes d'adhésion ({joinRequests.length})\n              </h2>\n              {joinRequests.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {joinRequests.map((request) => (\n                    <div key={request.id} className=\"glass-effect rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center\">\n                          {request.user_avatar_url ? (\n                            <img\n                              src={request.user_avatar_url}\n                              alt={request.user_handle}\n                              className=\"w-12 h-12 rounded-full mr-4\"\n                            />\n                          ) : (\n                            <div className=\"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center mr-4\">\n                              <span className=\"text-white font-bold\">\n                                {request.user_handle.charAt(0).toUpperCase()}\n                              </span>\n                            </div>\n                          )}\n                          <div>\n                            <h4 className=\"text-white font-semibold\">{request.user_handle}</h4>\n                            {request.message && (\n                              <p className=\"text-gray-300 text-sm mt-1\">{request.message}</p>\n                            )}\n                            <p className=\"text-gray-500 text-xs mt-1\">\n                              Demandé le {new Date(request.created_at).toLocaleDateString('fr-FR')}\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className=\"flex space-x-2\">\n                          <button\n                            onClick={() => handleJoinRequestAction(request.id, 'accepted')}\n                            className=\"btn-primary text-sm\"\n                          >\n                            Accepter\n                          </button>\n                          <button\n                            onClick={() => handleJoinRequestAction(request.id, 'rejected')}\n                            className=\"btn-ghost text-red-400 hover:text-red-300 text-sm\"\n                          >\n                            Refuser\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <CheckCircleIcon className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\n                  <p className=\"text-gray-400\">Aucune demande d'adhésion en attente</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'danger' && (\n            <div>\n              <h2 className=\"text-2xl font-bold text-white mb-6\">Zone de danger</h2>\n              <div className=\"space-y-6\">\n                {/* Transfer Ownership */}\n                <div className=\"border border-yellow-600 rounded-lg p-6\">\n                  <h3 className=\"text-lg font-semibold text-yellow-400 mb-2\">\n                    Transférer la propriété\n                  </h3>\n                  <p className=\"text-gray-300 mb-4\">\n                    Transférez définitivement la propriété de cette organisation à un autre membre.\n                  </p>\n                  <button\n                    onClick={() => setShowTransferModal(true)}\n                    className=\"btn-secondary text-yellow-400 border-yellow-400 hover:bg-yellow-400 hover:text-dark-900\"\n                  >\n                    <ArrowRightOnRectangleIcon className=\"w-5 h-5 mr-2\" />\n                    Transférer la propriété\n                  </button>\n                </div>\n\n                {/* Delete Organization */}\n                <div className=\"border border-red-600 rounded-lg p-6\">\n                  <h3 className=\"text-lg font-semibold text-red-400 mb-2\">\n                    Supprimer l'organisation\n                  </h3>\n                  <p className=\"text-gray-300 mb-4\">\n                    Supprimez définitivement cette organisation. Cette action est irréversible.\n                  </p>\n                  <button\n                    onClick={() => setShowDeleteModal(true)}\n                    className=\"btn-secondary text-red-400 border-red-400 hover:bg-red-400 hover:text-white\"\n                  >\n                    <TrashIcon className=\"w-5 h-5 mr-2\" />\n                    Supprimer l'organisation\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Transfer Ownership Modal */}\n        {showTransferModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-dark-800 rounded-lg p-6 max-w-md w-full\">\n              <h3 className=\"text-xl font-bold text-white mb-4\">\n                Transférer la propriété\n              </h3>\n              <p className=\"text-gray-300 mb-6\">\n                Sélectionnez le nouveau propriétaire de cette organisation. Cette action est irréversible.\n              </p>\n              \n              <div className=\"mb-6\">\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Nouveau propriétaire\n                </label>\n                <select\n                  value={selectedNewOwner}\n                  onChange={(e) => setSelectedNewOwner(e.target.value)}\n                  className=\"input-primary w-full\"\n                >\n                  <option value=\"\">Sélectionner un membre...</option>\n                  {members\n                    .filter(m => m.user_id !== user.id)\n                    .map(member => (\n                      <option key={member.user_id} value={member.user_id}>\n                        {member.handle} ({member.role})\n                      </option>\n                    ))}\n                </select>\n              </div>\n              \n              <div className=\"flex space-x-4\">\n                <button\n                  onClick={() => setShowTransferModal(false)}\n                  className=\"btn-ghost flex-1\"\n                >\n                  Annuler\n                </button>\n                <button\n                  onClick={handleTransferOwnership}\n                  disabled={!selectedNewOwner}\n                  className=\"btn-primary flex-1 bg-yellow-600 hover:bg-yellow-700\"\n                >\n                  Confirmer le transfert\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Delete Confirmation Modal */}\n        {showDeleteModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-dark-800 rounded-lg p-6 max-w-md w-full\">\n              <div className=\"flex items-center mb-4\">\n                <ExclamationTriangleIcon className=\"w-8 h-8 text-red-400 mr-3\" />\n                <h3 className=\"text-xl font-bold text-white\">\n                  Supprimer l'organisation\n                </h3>\n              </div>\n              \n              <p className=\"text-gray-300 mb-6\">\n                Êtes-vous absolument sûr de vouloir supprimer <strong>{organization.name}</strong> ?\n                Cette action supprimera définitivement l'organisation, tous ses membres, événements et données associées.\n                Cette action est <strong>irréversible</strong>.\n              </p>\n              \n              <div className=\"flex space-x-4\">\n                <button\n                  onClick={() => setShowDeleteModal(false)}\n                  className=\"btn-ghost flex-1\"\n                >\n                  Annuler\n                </button>\n                <button\n                  onClick={handleDeleteOrganization}\n                  className=\"btn-primary flex-1 bg-red-600 hover:bg-red-700\"\n                >\n                  Oui, supprimer définitivement\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ManageOrganizationPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}